
##########################################################################
#                                                                        #
#                              * SETTINGS *                              #
#                                                                        #
##########################################################################

custom_header:
  kiosk_mode: true #false true
  exceptions:
    - conditions:
        user_agent: Mobile
      config:
        kiosk_mode: false


preload_cards:
  [map, iframe]
preload_rows:
  [input-select-entity]

anchors:
  ⚓₁: &title
    entity: sensor.placeholder
    tap_action:
      action: none
    hold_action:
      action: none
    type: state-label
  ⚓₂: &title-style
    color: '#bcbebf'
    font-family: SF Text
    font-size: 1.8vw
    font-weight: 500
    max-width: 1px
    cursor: default
  ⚓3: &title-style-header
    color: '#bcbebf'
    font-family: SF Text
    font-size: 2.5vw
    font-weight: 500
    max-width: 1px
    cursor: default

button_card_templates:
  light:
    aspect_ratio: 1/1
    show_state: true
    show_icon: false
    state: &button_state
      - value: 'on'
        styles:
          card: [background-color: 'rgba(255, 255, 255, 0.8)']
          name: [color: 'rgba(0, 0, 0, 0.6)']
          state: [color: 'rgba(0, 0, 0, 0.6)']
    custom_fields:
      info: >
        [[[ if (entity.state === 'on' && entity.attributes.brightness) {
        const brightness = Math.round(entity.attributes.brightness / 2.54);
        const radius = 20.5; const circumference = radius * 2 * Math.PI; 
        return `<svg viewBox="0 0 50 50"><circle cx="25" cy="25" r="${radius}" stroke="#b2b2b2" stroke-width="1.5" fill="none" style="
        transform: rotate(-90deg); transform-origin: 50% 50%; stroke-dasharray: ${circumference}; stroke-dashoffset: ${circumference - brightness / 100 * circumference};" />
        <text x="50%" y="54%" fill="#8d8e90" font-size="14" text-anchor="middle" alignment-baseline="middle">${brightness}<tspan font-size="10">%</tspan></text></svg>`; } ]]]
    styles:
      name: &button_styles_name
        [top: 57.7%, left: 11%, position: absolute, line-height: 2vw]
      state: &button_styles_state
        [top: 74%, left: 11%, position: absolute, line-height: 2vw]
      custom_fields:
        info: &circle_pos
          [top: 8.5%, left: 56.2%, width: 3.5vw, position: absolute, letter-spacing: 0.03vw]
      card: &button_styles_card
        [font-family: Sf Display, letter-spacing: 0.05vw, text-rendering: optimizeLegibility, font-weight: 400, color: 'rgba(255, 255, 255, 0.3)', font-size: 1.34vw, 
        background-color: 'rgba(115, 115, 115, 0.2)', border-radius: 0.8vw, box-shadow: none, transition: none]
    tap_action:
      ui_sound: &ui_sound |
        [[[ if (entity.state === 'off' && states['light.gateway_light_34ce008c099b'].state === 'off') {
        hass.callService('media_player', 'play_media', {entity_id: 'media_player.ke_ting', media_content_id: '/local/sound/on.m4a', media_content_type: 'music'}); }
        else if (entity.state === 'on' && states['light.gateway_light_34ce008c099b'].state === 'off') {
        hass.callService('media_player', 'play_media', {entity_id: 'media_player.ke_ting', media_content_id: '/local/sound/off.m4a', media_content_type: 'music'}); } ]]]
      action: toggle
      haptic: light
    hold_action:
      action: call-service
      service: browser_mod.popup
      service_data:
        title: 关闭
        deviceID: this
        style:
          --ha-card-border-radius: 1em
          --more-info-header-color: rgba(255,255,255,0.6)
          background: none
          box-shadow: none
        card:
          type: vertical-stack
          cards:
            - type: entities
              title: '[[[ return entity.attributes.friendly_name ]]]'
              style: &popup_style |
                ha-card {
                  animation: pop-in 0.8s cubic-bezier(0.16, 1, 0.3, 1) both; transform-origin: center;
                  box-shadow: none; border-radius: 1em; padding: 0.3em 1.25em 0.4em 0.5em; 
                  background: linear-gradient(180deg, rgba(48,52,52,1) 0%, rgba(48,52,52,1) 4.8em, rgba(34,38,39,1) 4.8em, rgba(34,38,39,1) 100%); }
                .card-header {
                  margin: -0.4em 0 1.4em 0.4em; font-family: sf text; letter-spacing: 0.005em; font-size: 1.5em;}
                @keyframes pop-in {
                  0% { transform: scale(0.6); opacity: 0; } 20% { opacity: 0; } 100% { transform: scale(1); opacity: 0.9; }}
              show_header_toggle: false
              entities:
                - type: custom:light-popup-card
                  entity: '[[[ return entity.entity_id ]]]'
                  icon: none
                  fullscreen: false
                  brightnessWidth: 130px
                  brightnessHeight: 360px
                  borderRadius: 1.7em
                  sliderColor: '#c7c7c7'
                  sliderTrackColor: rgba(25, 25, 25, 0.9)
                  actionSize: 4.5em
                  actionsInARow: 2
                  style: |
                    #popup { 
                      margin: -2.4em 0 1.4em 0; }
                    #popup > div.range-holder > input[type=range] {
                      cursor: grab; }
                    #brightnessValue {
                      color: rgba(255, 255, 255, 0.8); margin: -1em 0 0 0; font-size: 2em; font-weight: 400; 
                      position: absolute; z-index: 100; font-family: SF Display; letter-spacing: 0.02em; pointer-events: none; 
                      mix-blend-mode: difference; text-align:center; width: 3.4em; height: 3.4em; }
                    #popup > div.range-holder > input[type=range]::-webkit-slider-thumb {
                      border: 0; eight: 0; width: 0; cursor: grabbing; }
                    #popup > div.action-holder > div > div {
                      margin: 0.8em 0.5em -0.8em 0.5em; }
                    #popup > div.action-holder > div:nth-child(2) > div:nth-child(2) > span {
                      background: radial-gradient(circle, rgba(255,255,255,1) 0%, rgba(255,255,255,0) 80%), 
                      conic-gradient(rgb(120,39,230), rgb(230,34,231), rgb(228,5,136), rgb(228,25,25), rgb(229,105,30), rgb(232,226,46), 
                      rgb(125,230,41), rgb(52,232,40), rgb(51,231,92), rgb(52,232,224),rgb(32,125,229), rgb(18,39,229), rgb(120,39,230));
                      border-width: 2px; border-color: #e6e6e6; --size: 4.4em !important; }
                  actions:
                    - service: light.turn_on
                      service_data:
                        entity_id: '[[[ return entity.entity_id ]]]'
                        color_temp: 153
                      color: "#d8d9e1"
                    - service: light.turn_on
                      service_data:
                        entity_id: '[[[ return entity.entity_id ]]]'
                        color_temp: 326
                      color: "#d5b08d"
                    - service: light.turn_on
                      service_data:
                        entity_id: '[[[ return entity.entity_id ]]]'
                        color_temp: 500
                      color: "#ce944b"
                    - service: browser_mod.popup
                      service_data:
                        title: 关闭
                        deviceID: this
                        style:
                          --ha-card-border-radius: 1em
                          --more-info-header-color: rgba(255,255,255,0.6)
                          background: none
                          box-shadow: none
                        card:
                          type: entities
                          title: 调节选项
                          style: *popup_style
                          show_header_toggle: false
                          entities:
                            - entity: '[[[ return entity.entity_id ]]]'
                              secondary_info: last-changed
                            - type: custom:light-entity-card
                              entity: '[[[ return entity.entity_id ]]]'
                              style:
                                .: |
                                  ha-card {
                                    background: none; box-shadow: none; margin: -0.5em -1em -0.5em -0.7em; }
                                  ha-card > div.light-entity-card-sliders.ha-slider-full-width { 
                                    margin-bottom: 0.75em; }
                                  ha-card > div.light-entity-card-sliders.ha-slider-full-width > div > ha-icon {
                                    margin: auto; width: 34px; height: 34px; cursor: default; 
                                    padding-right: 0.49em; color: var(--paper-item-icon-color);}
                                  ha-card > div.light-entity-card-sliders.ha-slider-full-width > div > div {
                                    margin: auto; padding: 0 1.4em 0 1em; max-width: 1em; cursor: default;}
                                'ha-card > div.light-entity-card-sliders.ha-slider-full-width > div > ha-slider':
                                  $: |
                                    #sliderContainer { 
                                      --calculated-paper-slider-height: var(--paper-slider-height, 5px); }
                              brightness: false
                              color_temp: true
                              full_width_sliders: true
                              header: false
                              show_slider_percent: true
                              smooth_color_wheel: true

  switch:
    aspect_ratio: 1/1
    show_state: true
    show_icon: false
    state: *button_state
    styles:
      name: *button_styles_name
      state: *button_styles_state
      card: *button_styles_card
      custom_fields:
        loading:
          [filter: "[[[ return entity.state === 'off' ? 'invert(1)' : 'none'; ]]]", 
           top: 3%, left: 60%, width: 3.7vw, position: absolute, opacity: 0.6]
    tap_action:
      ui_sound: *ui_sound
      action: toggle
      haptic: light
    hold_action:
      action: more-info

  sensors:
    aspect_ratio: 1/1
    show_state: true
    show_icon: false
    state: *button_state
    styles:
      name: *button_styles_name
      state: *button_styles_state
      card: *button_styles_card
#      custom_fields:
#        loading:
#          [filter: "[[[ return entity.state === 'off' ? 'invert(1)' : 'none'; ]]]", 
#           top: 3%, left: 60%, width: 3.7vw, position: absolute, opacity: 0.6]
    tap_action:
      ui_sound: *ui_sound
      action: more-info
      haptic: light
    hold_action:
      action: more-info

  cover:
    aspect_ratio: 1/1
    show_state: true
    show_icon: false
    state: 
      - value: 'open'
        styles:
          card: [background-color: 'rgba(255, 255, 255, 0.8)']
          name: [color: 'rgba(0, 0, 0, 0.6)']
          state: [color: 'rgba(0, 0, 0, 0.6)']
      - value: 'openning'
        styles:
          card: [background-color: 'rgba(255, 255, 255, 0.8)']
          name: [color: 'rgba(0, 0, 0, 0.6)']
          state: [color: 'rgba(255, 0, 0, 0.6)']
    styles:
      name:
        [top: 57.7%, left: 11%, position: absolute, line-height: 2vw]
      state: 
        [top: 74%, left: 11%, position: absolute, line-height: 2vw]
      custom_fields:
        info:
          [top: 8.5%, left: 56.2%, width: 3.5vw, position: absolute, letter-spacing: 0.03vw]
      card: 
        [font-family: Sf Display, letter-spacing: 0.05vw, text-rendering: optimizeLegibility, font-weight: 400, color: 'rgba(255, 255, 255, 0.3)', font-size: 1.34vw, 
        background-color: 'rgba(115, 115, 115, 0.2)', border-radius: 0.8vw, box-shadow: none, transition: none]
    tap_action:
      ui_sound: *ui_sound
      action: more-info
      haptic: light
    hold_action:
      action: more-info

  climate:
    aspect_ratio: 1/1
    show_state: true
    show_icon: false
    state: 
      - value: 'cool'
        styles:
          card: [background-color: 'rgba(255, 255, 255, 0.8)']
          name: [color: 'rgba(0, 0, 0, 0.6)']
          state: [color: 'rgba(0, 255, 0, 0.6)']
      - value: 'heat'
        styles:
          card: [background-color: 'rgba(255, 255, 255, 0.8)']
          name: [color: 'rgba(0, 0, 0, 0.6)']
          state: [color: 'rgba(255, 0, 0, 0.6)']
      - value: 'dry'
        styles:
          card: [background-color: 'rgba(255, 255, 255, 0.8)']
          name: [color: 'rgba(0, 0, 0, 0.6)']
          state: [color: 'rgba(255, 255, 0, 0.6)']
      - value: 'fan_only'
        styles:
          card: [background-color: 'rgba(255, 255, 255, 0.8)']
          name: [color: 'rgba(0, 0, 0, 0.6)']
          state: [color: 'rgba(72,209,204, 0.6)']
      - value: 'auto'
        styles:
          card: [background-color: 'rgba(255, 255, 255, 0.8)']
          name: [color: 'rgba(0, 0, 0, 0.6)']
          state: [color: 'rgba(0, 0, 0, 0.6)']
    styles:
      name: *button_styles_name
      state: *button_styles_state
      card: *button_styles_card
      custom_fields:
        loading:
          [filter: "[[[ return entity.state === 'off' ? 'invert(1)' : 'none'; ]]]", 
           top: 3%, left: 60%, width: 3.7vw, position: absolute, opacity: 0.6]
    tap_action:
      ui_sound: *ui_sound
      action: toggle
      haptic: light
    hold_action:
      action: more-info


  icon_action:
    color: '#9da0a2'
    styles:
      card:
        [background: '#FFFFFF10', border-radius: 0.6em, box-shadow: none, 
        transition: none, width: 4em, height: 3.7em]

  name_action:
    styles:
      name:
        [display: flex, align-items: center, justify-content: center, margin-top: 0.5px]
      card:
        [background: '#FFFFFF10', color: '#9da0a2', border-radius: 0.6em, box-shadow: none, 
        transition: none, width: 100%, padding: 1em 1.4em 1em 1.2em, font-size: 1.06em, 
        font-weight: 500, letter-spacing: 0.015em]
    style: '#name > ha-icon {width: 1.4em; margin-right: 0.3em; }'


  media:
    aspect_ratio: 1/1
    show_state: true
    show_icon: false
    state_display: >
      [[[ if (entity.attributes.media_title === 'Nothing playing' || entity.attributes.media_title === 'No title' && entity.state === 'paused' ) { return 'Inget spelas'; }
      if (entity.attributes.media_title === 'No title' && entity.state === 'playing') { return 'Ingen titel'; }
      else { return entity.attributes.media_title; } ]]]
    custom_fields:
      media_image: >
        <svg viewBox="0 0 50 50" />
      blur: >
        [[[ if (entity.attributes.entity_picture != null) {
        return '<svg viewBox="0 0 50 50" />'; } ]]]
      overlay: >
        [[[ if (entity.state != 'off' && entity.state != 'idle' && entity.state != 'standby' && entity.state != 'unavailable') {
        return '<svg viewBox="0 0 50 50" />'; } ]]]
      play_pause: >
        [[[ const style = `<style>.scale-up { animation: scale-up 0.3s; cubic-bezier(.05,.5,.3,1) 1; transform-origin: center center; }
        @keyframes scale-up { 0% { opacity: 0; transform: scale(0); } 100% { opacity: 1; transform: scale(1); } }</style>`;
        if (entity.state === 'playing') { return `<svg viewBox="0 0 166 166">${style}<path class="scale-up" d="M0 0h59.9v166H0zm106.1 0H166v166h-59.9z"/></svg>`; }
        if (entity.state === 'paused') { return `<svg viewBox="0 0 166 166">${style}<path class="scale-up" d="M0 0l166 83L0 166z"/></svg>`; } ]]]
    tap_action: &media_tap_action
      sound: >
        [[[ if (states['switch.fullykiosk_screensaver'].state === 'off') {
        if (entity.state != 'off' || entity.state != 'idle' || entity.state != 'standby')
        hass.callService('media_player', 'play_media', {entity_id: 'media_player.tablet', media_content_id: '/local/sound/popup.m4a', media_content_type: 'music'}); } ]]]
      action: >
        [[[ if (entity.state === 'off' || entity.state === 'idle' || entity.state === 'standby') {
        return 'none'; } else { return 'call-service'; } ]]]
      service: media_player.media_play_pause
      service_data:
        entity_id: '[[[ return entity.entity_id ]]]'
      haptic: light
    styles:
      custom_fields:
        media_image:
          [background-image:
          "[[[ return entity.attributes.entity_picture == null ? 'linear-gradient(0deg, rgba(115, 115, 115, 0.2) 0%, rgba(115, 115, 115, 0.2) 100%)' 
          : 'linear-gradient(0deg, rgba(13,17,19,0.9) 0%, rgba(13,17,19,0) 50%), url(' + entity.attributes.entity_picture + ')'; ]]]", 
          background-size: cover, top: 0%, left: 0%, width: 100%, position: absolute]
        blur:
          [background-image:
          "[[[ return entity.attributes.entity_picture == null ? 'none' : 'url(' + entity.attributes.entity_picture + ')'; ]]]", 
          background-size: cover, top: 0%, left: 0%, width: 100%, filter: blur(4px), clip-path: inset(16vw 0 0 0), position: absolute]
        overlay:
          [background:
          "[[[ return entity.attributes.entity_picture == null ? 'rgba(255, 255, 255, 0.8)' : 'rgba(0, 0, 0, 0.4)'; ]]]", 
          background-size: cover, z-index: 0, top: 16vw, left: 0%, width: 100%, opacity: 1, position: absolute]
        play_pause:
          [filter: 
          "[[[ return entity.attributes.entity_picture == null ? 'none' : 'drop-shadow(0 0 1.3vw rgba(0,0,0,0.7))'; ]]]", 
          fill: '#dedede', top: 0, right: 0, bottom: 0, left: 0, margin: auto, width: 21%, height: 21%, position: absolute]
        icon:
          [fill:
          "[[[ if (entity.state === 'off' || entity.state === 'idle' || entity.state === 'standby' || entity.state === 'unavailable') return '#9da0a2'; 
          else return 'rgba(255, 255, 255, 0.8)'; ]]]", 
          top: 5.35%, left: 5.35%, width: 2.95vw, position: absolute]
      name:
        [top: 77.8%, left: 5.3%, position: absolute, line-height: 2vw, z-index: 10]
      state:
        [top: 87.8%, left: 5.3%, position: absolute, line-height: 2vw, z-index: 10, 
        white-space: nowrap, overflow: hidden, text-overflow: ellipsis, max-width: 90%]
      card: 
        [<<: *button_styles_card, background-color: none, 
        color: &media_font_color "[[[ if (entity.state === 'off' || entity.state === 'idle' || entity.state === 'standby' || entity.state === 'unavailable') { return 'rgba(255, 255, 255, 0.3)'; }
        if ((entity.state != 'off' && entity.state != 'idle' && entity.state != 'standby') && (entity.attributes.entity_picture == null)) {
        return 'rgba(0, 0, 0, 0.6)'; } else { return '#efefef'; } ]]]", 
        text-shadow: &media_text_shadow "[[[ if (entity.attributes.entity_picture == null) return 'none'; 
        else return '1px 1px 5px rgba(18, 22, 23, 0.9)' ; ]]]"]

  media_small:
    aspect_ratio: 1/1
    show_state: true
    show_icon: false
    tap_action: *media_tap_action
    styles:
      custom_fields:
        icon:
          [opacity: "[[[ return entity.attributes.entity_picture == null ? 1 : 0; ]]]", 
          top: 11.5%, left: 11.5%, width: 2.9vw, position: absolute, fill: '#9da0a2']
      name: *button_styles_name
      state: *button_styles_state
      card:
        [<<: *button_styles_card, color: *media_font_color, text-shadow: *media_text_shadow, 
        background-color: none, background-size: cover,
        background-image: 
        "[[[ if (entity.state === 'off' || entity.state === 'idle' || entity.state === 'standby' || entity.state === 'unavailable') {
        return 'linear-gradient(0deg, rgba(115, 115, 115, 0.2) 0%, rgba(115, 115, 115, 0.2) 100%)'; }
        if ((entity.state != 'off' && entity.state != 'idle' && entity.state != 'standby') && (entity.attributes.entity_picture == null)) {
        return 'linear-gradient(0deg, rgba(255, 255, 255, 0.8) 0%, rgba(255, 255, 255, 0.8) 100%)'; }
        else { return 'linear-gradient(0deg, rgba(0,0,0,.8) 0%, rgba(0,0,0,0) 100%), url(' + entity.attributes.entity_picture + ')'; } ]]]"]


title: 平板
views:
  - panel: true
    path: default_view
    title: 活动区
    cards:
      - type: picture-elements
        image: /local/images/Wallpapers/bg_pixelc.png
        style:
          .: |
            /* Global */

            #root > hui-icon-element {color: rgba(255, 255, 255, 0.1) !important; transition: 0.4s;}
            #root > hui-icon-element:hover {color: rgba(255, 255, 255, 0.25) !important; transition: none;}
            #root > hui-icon-element:active {color: rgba(255, 255, 255, 0.35) !important; transition: none;}
          "#root > hui-image":
            $: |
              #image {pointer-events: none;}
          "#root > hui-markdown-card, #root > hui-element > hui-markdown-card":
            $: |
              ha-card > ha-markdown {padding: 0 !important;}
              ha-card > ha-markdown > p > font > ha-icon {vertical-align: 3%; opacity: 0.6;}
              ha-card > ha-markdown > p > span {font-family: SF Text; font-size: 5vw; 
              font-weight: 200; margin-left: -0.3vw; letter-spacing: -0.05vw;}
          "#root > hui-state-label-element":
            $: |
              div {padding: 0 !important;}
          "#root > hui-conditional-element:nth-child(11) > button-card":
            $: |
              #card { background-color: #202a2f90; }
              #card:hover, #card:active { filter: brightness(140%); transition: none; }
        elements:
          #################################################
          #                                               #
          #                     * 底栏 *                  #
          #                                               #
          #################################################
          - type: custom:hui-markdown-card
            style:
              top: 93.5%
              left: 70.2%
              width: 90vw
              height: 1px
              --mdc-icon-size: 1.2vw
              --ha-card-background: none
              --ha-card-box-shadow: none
              --primary-text-color: '#6a7377'
              font-family: SF Display
              font-size: 1.15vw
              font-weight: 400
              letter-spacing: 0.06vw
              line-height: 2.05vw
              opacity: 0.5
            content: >
              {% if is_state('sensor.china_coronavirus_current', 
              'unavailable') %} {% else %}
              <font color='#6a7377'>
              <ha-icon icon="custom:corona-virus"></ha-icon> <b>COVID-19</b>
              ‍  ‍  ‍   ‍  ‍  ‍ <font color='#2f3436'>|‍</font>  ‍  ‍  ‍   ‍  ‍  ‍ 
              <ha-icon icon="mdi:emoticon-sad"></ha-icon> 现存:
              <b>{{ states('sensor.china_coronavirus_current') }}</b> 人
              ‍  ‍  ‍   ‍  ‍  ‍ <font color='#2f3436'>|‍</font>  ‍  ‍  ‍   ‍  ‍  ‍ 
              <ha-icon icon="mdi:emoticon-happy"></ha-icon> 治愈:
              <b>{{ states('sensor.china_coronavirus_recovered') }}</b> 人
              ‍  ‍  ‍   ‍  ‍  ‍ <font color='#2f3436'>|‍</font>  ‍  ‍  ‍   ‍  ‍  ‍ 
              <ha-icon icon="mdi:chart-bar"></ha-icon> 累计:
              <b>{{ states('sensor.china_coronavirus_confirmed') }}</b> 人
              ‍  ‍  ‍   ‍  ‍  ‍ <font color='#2f3436'>|‍</font>  ‍  ‍  ‍   ‍  ‍  ‍ 
              <ha-icon icon="mdi:grave-stone"></ha-icon> 死亡:
              <b>{{ states('sensor.china_coronavirus_deaths') }}</b> 人
              </font>
              {% endif %}
          ##########################################################################
          #                                                                        #
          #                              * 边栏 *                                  #
          #                                                                        #
          ##########################################################################
          - type: image
            image: /local/images/Wallpapers/sidebar_pixel.png
            tap_action:
              action: none
            hold_action:
              action: none
            style:
              top: 50%
              left: 10.6%
              width: 21.5%
              pointer-events: none
              border-right: 1.5px solid rgba(58,69,73,0.2)
          #################################################
          #                                               #
          #                   侧栏信息                     #
          #                                               #
          #################################################
          - type: custom:hui-element
            card_type: markdown
            style:
              {top: 8%, left: 11.1%, width: 15.5vw, height: 1px, --ha-card-background: none, --ha-card-box-shadow: none, 
              --primary-text-color: 'rgba(255, 255, 255, 0.9)', font-family: SF Display, font-size: 4.5vw, font-weight: 300, 
              letter-spacing: 0.06vw, line-height: 2.05vw, opacity: 0.75}
            content: >
              <span>{{ states('sensor.time' ) }}</span>

          - type: custom:hui-element
            card_type: markdown
            style:
              {top: 15%, left: 11.1%, width: 15.5vw, height: 1px, --ha-card-background: none, --ha-card-box-shadow: none, 
              --primary-text-color: 'rgba(255, 255, 255, 0.9)', font-family: SF Display, font-size: 1.5vw, font-weight: 300, 
              letter-spacing: 0.06vw, line-height: 2.05vw, opacity: 0.75}
            content: >
              <span>{{ states('sensor.date' ) }}</span>


              <font color='#6a7377'><b>{{ states('sensor.jieqi_cnday') }}</b><br>
              <b>{{ states('sensor.jieqi_week') }}</b> </font><br> 

              <b>{{ states('sensor.greeting') }}</b>


              ☀   <b>天气预报</b>   🌦 

              <font color='#6a7377'>

              实时：<b>{{ states('sensor.caiyun_hourly_skycon') }}</b>

              明日：<b>{{ states('sensor.caiyun_day1_skycon') }}</b>

              后日：<b>{{ states('sensor.caiyun_day2_skycon') }}</b>

              <font color='#F5F5F5'>

              预警：{{ states('sensor.caiyun_minutely_description') }}


          - type: custom:hui-element
            card_type: markdown
            style:
              {top: 68%, left: 11.1%, width: 15.5vw, height: 1px, --ha-card-background: none, --ha-card-box-shadow: none, 
              --primary-text-color: 'rgba(255, 255, 255, 0.9)', font-family: SF Display, font-size: 1.2vw, font-weight: 300, 
              letter-spacing: 0.06vw, line-height: 2.05vw, opacity: 0.75}
            content: >
              {{'\u26A0\uFE0F'}} 服务器风扇转速：<b>{{ states('sensor.hp_ilo_cpu_fanspeed') }}%</b>


              {% if is_state('sensor.plex_gen8_plex', '0') %}
              {{'\u26A0\uFE0F'}} Plex无用户连接 {% endif %}


              {% if is_state('binary_sensor.door_window_sensor_158d0002014310', 'on') %}
              {{'\u26A0\uFE0F'}} 入户大门开启中 {% endif %}
              </font>


              {% if is_state('group.all_motion_sensors', 'on') %}
              {{'\u26A0\uFE0F'}} 家里目前有人晃悠 {% endif %}
              </font>



          #################################################
          #                                               #
          #                  底部按钮                      #
          #                                               #
          #################################################

          - type: icon
            icon: mdi:sofa
            title: 活动区
            style:
              top: 87.41%
              left: 2.8%
              color: rgba(255, 255, 255, 0.10)
              padding: 0.8vw
              --mdc-icon-size: 3vw
            tap_action: #!include popup/sidebar_vacuum.yaml
              action: navigate
              navigation_path: /lovelace-matt8707/default_view

          - type: icon
            icon: mdi:bed-king-outline 
            title: 休息区
            style:
              top: 87.41%
              left: 7.8%
              color: rgba(255, 255, 255, 0.10)
              padding: 0.8vw
              --mdc-icon-size: 3vw
            tap_action: #!include popup/sidebar_vacuum.yaml
              action: navigate
              navigation_path: /lovelace-matt8707/default_view2

          - type: icon
            icon: mdi:toilet
            title: 厨卫区
            style:
              top: 87.41%
              left: 13.1%
              color: rgba(255, 255, 255, 0.10)
              padding: 0.8vw
              --mdc-icon-size: 3vw
            tap_action: #!include popup/sidebar_scenarier.yaml
              action: navigate
              navigation_path: /lovelace-matt8707/default_view3

          - type: icon
            icon: mdi:hammer-wrench #memory 
            title: 系统信息
            style:
              top: 87.55%
              left: 18.2%
              color: rgba(255, 255, 255, 0.10)
              padding: 0.8vw
              --mdc-icon-size: 3vw
            tap_action: #!include popup/sidebar_information.yaml
              action: navigate
              navigation_path: /lovelace-matt8707/default_view4
          #################################################
          #                                               #
          #                      角标信息                  #
          #                                               #
          #################################################

          - type: conditional
            conditions:
              - entity: sensor.hass_version_template
                state_not: Senaste
              - entity: sensor.hass_version_template
                state_not: unknown
            elements:
              - type: image
                image: "data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 50 50'%3E%3Ccircle cx='25' cy='25' r='20.3' fill='%23ac2e2e' /%3E%3Cpath d='M24.4 18.3h0L19 21.9v-3.4l5.3-3.7H28v20.4h-3.6V18.3z' fill='%23bcbebf' /%3E%3C/svg%3E"
                style:
                  top: 85%
                  left: 12.2%
                  width: 1.7%
                  pointer-events: none

          #################################################
          #                                               #
          #                     信息提醒1                  #
          #                                               #
          #################################################

          - type: conditional
            conditions:
              - entity: input_boolean.krisinformation_visibility
                state: 'on'
            elements:
              - type: custom:stack-in-card
                style:
                  --ha-card-background: '#5a1f1f'
                  --ha-card-box-shadow: none
                  filter: 'drop-shadow(0 0 1vw #1e1e1e)'
                  --primary-text-color: rgba(255, 255, 255, 0.9)
                  font-family: SF Display
                  font-size: 1.3vw
                  font-weight: 300
                  height: 1px
                  max-height: 4vw
                  left: 10.7%
                  letter-spacing: 0.06vw
                  line-height: 1.7vw
                  max-width: 17vw
                  position: absolute
                  top: 18%
                  width: 17.5vw
                  hyphens: auto
                  z-index: 10
                  --ha-card-border-radius: 0.7vw
                  --ha-card-border: '0.1vw solid #292c2e'
                cards:
                - type: custom:hui-element
                  card_type: markdown
                  style: "ha-card {padding: 0.4vw;}"
                  content: >
                    {% if is_state_attr('sensor.krisinformation_sverige', 'messages', []) %}
                    {% else %}
                      {{'\u26A0\uFE0F'}} <b>Krisinformation</b><br>
                      {{ as_timestamp(state_attr('sensor.krisinformation_sverige', 
                      'messages')[0]["Published"]) | timestamp_custom('%Y-%m-%d') }}<br>
                      {{ state_attr('sensor.krisinformation_sverige', 
                      'messages')[0]["Message"] | truncate(280, True, '...', 0) }}
                    {% endif %}
                - type: custom:button-card
                  show_label: true
                  label: OK
                  tap_action:
                    action: call-service
                    service: input_boolean.turn_off
                    service_data:
                      entity_id: input_boolean.krisinformation_visibility
                  styles:
                    label:
                      [font-size: 1.5vw, background: '#FFFFFF15', border-radius: 0.6vw, font-weight: 500, 
                      letter-spacing: 0.09vw, opacity: 0.65, padding: 0.7vw 1vw 0.8vw 1vw, font-family: SF Display]
                    card:
                      [width: 4.5vw, height: 5vw, margin-top: -0.5vw, padding-bottom: 1vw, margin-left: 138%]

          #################################################
          #                                               #
          #                 信息提醒2                      #
          #                                               #
          #################################################

          - type: conditional
            conditions:
              - entity: input_boolean.laundry_timer_visibility
                state: 'on'
            elements:
              - type: custom:button-card
                entity: timer.laundry
                show_icon: false
                show_name: false
                show_state: true
                tap_action:
                  services: |
                    [[[ hass.callService('timer', 'cancel', {entity_id: 'timer.laundry'});
                    hass.callService('timer', 'start', {entity_id: 'timer.laundry'}); ]]]
                hold_action:
                  services: |
                    [[[ hass.callService('timer', 'cancel', {entity_id: 'timer.laundry'});
                    hass.callService('input_boolean', 'turn_off', {entity_id: 'input_boolean.laundry_timer_visibility'}); ]]]
                styles:
                  card:
                    [background: '#202a2f30', border-radius: 0.7vw, box-shadow: none, border: '0.1vw solid #292c2e']
                  state:
                    [font-size: 2.5vw, font-weight: 500, letter-spacing: 0.09vw, opacity: 0.65, padding: 0.5vw 1vw 0.5vw 1vw]
                style:
                  top: 78%
                  left: 10.8%
                  font-size: 1.6vw

          #################################################
          #                                               #
          #                     信息提醒3                  #
          #                                               #
          #################################################
          - type: conditional
            conditions:
              - entity: sensor.hacs
                state_not: '0'
              - entity: sensor.hacs
                state_not: unknown
            elements:
              - type: custom:button-card
                style:
                  top: 95%
                  left: 10.45%
                name: >
                  [[[ if (parseInt(states['sensor.hacs'].state) === 1) {
                  return states['sensor.hacs'].state + '个HACS插件可更新!'; }
                  else { return states['sensor.hacs'].state + '个HACS插件有更新!'; } ]]]
                styles:
                  name:
                    [letter-spacing: 0.06vw, font-family: SF Display, font-weight: 500, 
                    font-size: 1.15vw, color: '#6a7377', padding: 0.4vw 1.2vw 0.4vw 1.2vw]
                  card:
                    [background: '#202a2f90', border-radius: 0.7vw, opacity: 0.5]
                tap_action:
                  action: call-service
                  service: browser_mod.popup
                  service_data:
                    title: 关闭
                    deviceID: this
                    style:
                      background: none
                      box-shadow: none
                      width: 75em
                    card:
                      type: custom:hui-element
                      card_type: iframe
                      url: !secret hacs_url
                      aspect_ratio: 60%
                      style: 'ha-card { border-radius: 1em;}'

#          - prefix: 顶端标题待设置
#            <<: *title
#            style:
#              top: 4.15%
#              left: 50.2%
#              <<: *title-style-header

          ##########################################################################
          #                                                                        #
          #                                   区域一                                #
          #                                                                        #
          ##########################################################################

          - prefix: 常用
            <<: *title
            style:
              top: 9.15%
              left: 25.4%
              <<: *title-style

          - type: custom:button-card
            entity: light.canting_dd
            name: 餐厅吊灯
            style:
              top: 20.35%
              left: 30.31%
              width: 10%
            #  filter: drop-shadow(0 0 0.75rem WhiteSmoke)
            custom_fields:
              icon_ceiling_light2: &icon_ceiling_light2 >
                [[[ if (entity.state === 'on') return '<svg id="er2qf9ff1nsp1"
                xmlns="http://www.w3.org/2000/svg"
                xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 25 25"
                shape-rendering="geometricPrecision"
                text-rendering="geometricPrecision"><style><![CDATA[#er2qf9ff1nsp2 {
                animation-name: er2qf9ff1nsp2__tt, er2qf9ff1nsp2_c_o;
                animation-duration: 1000ms; animation-fill-mode: forwards;
                animation-timing-function: linear; animation-direction: normal;
                animation-iteration-count: 1;   }@keyframes er2qf9ff1nsp2__tt { 0%
                {transform: translate(0px,0px) translate(0px,0px)} 50% {transform:
                translate(0px,0px) translate(0px,1px)} 100% {transform:
                translate(0px,0px) translate(0px,0px)} }@keyframes er2qf9ff1nsp2_c_o {
                0% {opacity: 0} 100% {opacity: 1} }]]></style><g id="er2qf9ff1nsp2"
                transform="translate(0,0) translate(0,0)" opacity="0"><path
                id="er2qf9ff1nsp3"
                d="M3.750000,11.474000C2.231000,11.474000,1,12.706000,1,14.224000C1,15.743000,2.231000,16.974000,3.750000,16.974000C5.269000,16.974000,6.500000,15.743000,6.500000,14.224000C6.500000,12.706000,5.269000,11.474000,3.750000,11.474000ZM20.250000,11.474000C18.731000,11.474000,17.500000,12.706000,17.500000,14.224000C17.500000,15.743000,18.731000,16.974000,20.250000,16.974000C21.769000,16.974000,23,15.743000,23,14.224000C23,12.706000,21.769000,11.474000,20.250000,11.474000ZM12,13.674000C10.481000,13.674000,9.250000,14.906000,9.250000,16.424000C9.250000,17.943000,10.481000,19.174000,12,19.174000C13.519000,19.174000,14.750000,17.943000,14.750000,16.424000C14.750000,14.906000,13.519000,13.674000,12,13.674000Z"
                transform="matrix(1 0 0 1 0 0)" opacity="0.64" fill="rgb(248,205,65)"
                fill-rule="evenodd" stroke="none" stroke-width="1"/></g><g
                id="er2qf9ff1nsp4"><g id="er2qf9ff1nsp5"><path id="er2qf9ff1nsp6"
                d="M7.604000,5.490000L7.604000,7.238000L11.130000,7.238000L11.130000,10.201000C10.216000,9.326000,9.063000,8.694000,7.701000,8.694000C6.140000,8.694000,4.587000,9.720000,3.569000,11.045000C3.631000,11.041000,3.692000,11.039000,3.754000,11.038000C4.288000,11.039000,4.817000,11.151000,5.305000,11.367000C5.955000,10.756000,6.816000,10.344000,7.701000,10.344000C9.458000,10.344000,10.893000,11.652000,11.130000,13.344000C11.416000,13.275000,11.710000,13.240000,12.004000,13.238000C12.299000,13.240000,12.592000,13.275000,12.878000,13.344000C13.115000,11.652000,14.550000,10.344000,16.307000,10.344000C17.192000,10.344000,18.055000,10.757000,18.705000,11.369000C19.193000,11.153000,19.720000,11.040000,20.254000,11.038000C20.317000,11.040000,20.380000,11.043000,20.443000,11.047000C19.426000,9.720000,17.870000,8.694000,16.307000,8.694000C14.945000,8.694000,13.792000,9.328000,12.879000,10.203000L12.879000,7.238000L16.404000,7.238000L16.404000,5.490000L7.604000,5.490000Z"
                fill="rgb(87,168,215)" stroke="none" stroke-width="1"/></g></g></svg> '
                ;   else return '<svg id="eghnobpxht0e1"
                xmlns="http://www.w3.org/2000/svg"
                xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 25 25"
                shape-rendering="geometricPrecision"
                text-rendering="geometricPrecision"><style><![CDATA[#eghnobpxht0e2 {
                animation-name: eghnobpxht0e2__tt, eghnobpxht0e2_c_o;
                animation-duration: 1000ms; animation-fill-mode: forwards;
                animation-timing-function: linear; animation-direction: normal;
                animation-iteration-count: 1;   }@keyframes eghnobpxht0e2__tt { 0%
                {transform: translate(0px,0px) translate(0px,0px)} 50% {transform:
                translate(0px,0px) translate(0px,1px)} 100% {transform:
                translate(0px,0px) translate(0px,0px)} }@keyframes eghnobpxht0e2_c_o {
                0% {opacity: 1} 100% {opacity: 0.500000} }]]></style><g
                id="eghnobpxht0e2" transform="translate(0,0) translate(0,0)"><path
                id="eghnobpxht0e3"
                d="M3.750000,11.474000C2.231000,11.474000,1,12.706000,1,14.224000C1,15.743000,2.231000,16.974000,3.750000,16.974000C5.269000,16.974000,6.500000,15.743000,6.500000,14.224000C6.500000,12.706000,5.269000,11.474000,3.750000,11.474000ZM20.250000,11.474000C18.731000,11.474000,17.500000,12.706000,17.500000,14.224000C17.500000,15.743000,18.731000,16.974000,20.250000,16.974000C21.769000,16.974000,23,15.743000,23,14.224000C23,12.706000,21.769000,11.474000,20.250000,11.474000ZM12,13.674000C10.481000,13.674000,9.250000,14.906000,9.250000,16.424000C9.250000,17.943000,10.481000,19.174000,12,19.174000C13.519000,19.174000,14.750000,17.943000,14.750000,16.424000C14.750000,14.906000,13.519000,13.674000,12,13.674000Z"
                transform="matrix(1 0 0 1 0 0)" opacity="0.64" fill="rgb(158,160,162)"
                fill-rule="evenodd" stroke="none" stroke-width="1"/></g><g
                id="eghnobpxht0e4"><g id="eghnobpxht0e5"><path id="eghnobpxht0e6"
                d="M7.604000,5.490000L7.604000,7.238000L11.130000,7.238000L11.130000,10.201000C10.216000,9.326000,9.063000,8.694000,7.701000,8.694000C6.140000,8.694000,4.587000,9.720000,3.569000,11.045000C3.631000,11.041000,3.692000,11.039000,3.754000,11.038000C4.288000,11.039000,4.817000,11.151000,5.305000,11.367000C5.955000,10.756000,6.816000,10.344000,7.701000,10.344000C9.458000,10.344000,10.893000,11.652000,11.130000,13.344000C11.416000,13.275000,11.710000,13.240000,12.004000,13.238000C12.299000,13.240000,12.592000,13.275000,12.878000,13.344000C13.115000,11.652000,14.550000,10.344000,16.307000,10.344000C17.192000,10.344000,18.055000,10.757000,18.705000,11.369000C19.193000,11.153000,19.720000,11.040000,20.254000,11.038000C20.317000,11.040000,20.380000,11.043000,20.443000,11.047000C19.426000,9.720000,17.870000,8.694000,16.307000,8.694000C14.945000,8.694000,13.792000,9.328000,12.879000,10.203000L12.879000,7.238000L16.404000,7.238000L16.404000,5.490000L7.604000,5.490000Z"
                fill="rgb(95,98,103)" stroke="none" stroke-width="1"/></g></g></svg>';
                ]]]
            styles:
              custom_fields:
                icon_ceiling_light2: &icon_ceiling_light2_styles
                  [fill: grey, top: 7%, left: 4.5%, width: 4.5vw, position: absolute]
            template: switch #light

          - type: custom:button-card
            entity: light.keting_xdd
            name: 客厅吸顶灯
            style:
              top: 20.35%
              left: 41.31%
              width: 10%
            custom_fields:
              icon_ceiling_light: &icon_ceiling_light >
                [[[ if (entity.state === 'on') return '<svg id="e7x4u4hifr771"
                xmlns="http://www.w3.org/2000/svg"
                xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 30 30"
                shape-rendering="geometricPrecision"
                text-rendering="geometricPrecision"><style><![CDATA[#e7x4u4hifr774 {
                animation-name: e7x4u4hifr774__tt, e7x4u4hifr774_c_o;
                animation-duration: 1000ms; animation-fill-mode: forwards;
                animation-timing-function: linear; animation-direction: normal;
                animation-iteration-count: 1;   }@keyframes e7x4u4hifr774__tt { 0%
                {transform: translate(0px,0px) translate(0px,0px)} 50% {transform:
                translate(0px,0px) translate(0px,0.500000px)} 100% {transform:
                translate(0px,0px) translate(0px,0px)} }@keyframes e7x4u4hifr774_c_o {
                0% {opacity: 0} 100% {opacity: 1} }]]></style><g
                id="e7x4u4hifr772"><path id="e7x4u4hifr773"
                d="M11,2L11,7.674000C10.827000,7.735000,10.659000,7.811000,10.500000,7.902000C9.627000,8.408000,9.067000,9.319000,9.010000,10.326000C8.310000,10.478000,7.636000,10.683000,7,10.937000C3.906000,12.188000,2,14.499000,2,17L22,17C22,14.499000,20.094000,12.188000,17,10.937000C16.365000,10.684000,15.691000,10.479000,14.992000,10.328000C14.935000,9.320000,14.374000,8.408000,13.500000,7.902000C13.341000,7.812000,13.173000,7.736000,13,7.676000L13,2L11,2L11,2Z"
                fill="rgb(87,168,215)" stroke="none" stroke-width="1"/></g><g
                id="e7x4u4hifr774" transform="translate(0,0) translate(0,0)"
                opacity="0"><path id="e7x4u4hifr775"
                d="M9.019000,18.185000C9.019000,19.257000,9.591000,20.247000,10.519000,20.783000C11.447000,21.319000,12.591000,21.319000,13.519000,20.783000C14.447000,20.247000,15.019000,19.257000,15.019000,18.185000L9.019000,18.185000Z"
                fill="rgb(248,205,65)" stroke="none" stroke-width="1"/></g></svg> ' ;   
                else return '<svg id="e47a1uy8ttsc1" xmlns="http://www.w3.org/2000/svg"
                xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 30 30"
                shape-rendering="geometricPrecision"
                text-rendering="geometricPrecision"><style><![CDATA[#e47a1uy8ttsc4 {
                animation-name: e47a1uy8ttsc4__tt, e47a1uy8ttsc4_c_o;
                animation-duration: 1000ms; animation-fill-mode: forwards;
                animation-timing-function: linear; animation-direction: normal;
                animation-iteration-count: 1;   }@keyframes e47a1uy8ttsc4__tt { 0%
                {transform: translate(0px,0px) translate(0px,0px)} 50% {transform:
                translate(0px,0px) translate(0px,0.500000px)} 100% {transform:
                translate(0px,0px) translate(0px,0px)} }@keyframes e47a1uy8ttsc4_c_o {
                0% {opacity: 1} 100% {opacity: 0.500000} }]]></style><g
                id="e47a1uy8ttsc2"><path id="e47a1uy8ttsc3"
                d="M11,2L11,7.674000C10.827000,7.735000,10.659000,7.811000,10.500000,7.902000C9.627000,8.408000,9.067000,9.319000,9.010000,10.326000C8.310000,10.478000,7.636000,10.683000,7,10.937000C3.906000,12.188000,2,14.499000,2,17L22,17C22,14.499000,20.094000,12.188000,17,10.937000C16.365000,10.684000,15.691000,10.479000,14.992000,10.328000C14.935000,9.320000,14.374000,8.408000,13.500000,7.902000C13.341000,7.812000,13.173000,7.736000,13,7.676000L13,2L11,2L11,2Z"
                fill="rgb(95,98,103)" stroke="none" stroke-width="1"/></g><g
                id="e47a1uy8ttsc4" transform="translate(0,0) translate(0,0)"><path
                id="e47a1uy8ttsc5"
                d="M9.019000,18.185000C9.019000,19.257000,9.591000,20.247000,10.519000,20.783000C11.447000,21.319000,12.591000,21.319000,13.519000,20.783000C14.447000,20.247000,15.019000,19.257000,15.019000,18.185000L9.019000,18.185000Z"
                fill="rgb(158,160,162)" stroke="none" stroke-width="1"/></g></svg>'; ]]]
            styles: &icon_ceiling_light_styles
              custom_fields:
                icon_ceiling_light: 
                  [fill: grey, top: 7%, left: 4.5%, width: 4.5vw, position: absolute]
            template: switch #light


#                [[[ const state = entity.state === 'on' ? 'animate' : null;
#                return `<svg viewBox="0 0 24 24"><style>@keyframes animate{0%{transform: scale(0.85);}20%{transform: scale(1.1);}40%{transform: scale(0.95);}60%{transform: scale(1.03);}80%{transform: scale(0.97);}100%{transform: scale(1);}}.animate{animation: animate 0.8s; transform-origin: center;}</style>
#                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M 11.20339,4.338962 V 8.6856509 A 2.3898305,2.298295 0 0 0 10.805085,8.8607196 2.3898305,2.298295 0 0 0 9.6179759,10.717589 7.9661018,5.3626885 0 0 0 8.0169492,11.185928 7.9661018,5.3626885 0 0 0 4.0338983,15.830399 H 19.966102 A 7.9661018,5.3626885 0 0 0 15.983051,11.185928 7.9661018,5.3626885 0 0 0 14.383618,10.719083 2.3898305,2.298295 0 0 0 13.194915,8.8606813 2.3898305,2.298295 0 0 0 12.79661,8.687114 V 4.338893 H 11.20339 Z M 9.6101694,17.362634 a 2.3898305,2.298295 0 0 0 1.1949156,1.990094 2.3898305,2.298295 0 0 0 2.38983,0 2.3898305,2.298295 0 0 0 1.194916,-1.990094 z" /></svg>
#                <path class="${state}" fill="var(--button-card-light-color-no-temperature)"  d="m 11.20339,4.338962 v 4.3466889 c -0.13806,0.04651 -0.271388,0.1051119 -0.398305,0.1750687 -0.695153,0.387657 -1.141187,1.0853409 -1.1871091,1.8568694 -0.5575497,0.116159 -1.094448,0.273215 -1.6010267,0.468339 -2.4648338,0.957996 -3.9831817,2.728479 -3.9830509,4.644471 H 19.966102 C 19.966233,13.914407 18.447885,12.143924 15.983051,11.185928 15.476882,10.991392 14.940527,10.83484 14.383618,10.719083 14.337879,9.9466939 13.891135,9.2482611 13.194915,8.8606813 13.067941,8.791241 12.934615,8.733142 12.79661,8.687114 V 4.338893 h -1.59322 z"/></svg>`; ]]]


          - type: custom:button-card
            entity: media_player.sony_tv
            name: 客厅电视
            style:
              top: 37.9%
              left: 30.31%
              width: 10%
            tap_action: &tv_tap_action
              services: |
                [[[ if (entity.state === 'off') {
                hass.callService('media_player', 'turn_on', {entity_id: entity.entity_id}); }
                if (entity.state === 'on') {
                hass.callService('media_player', 'turn_off', {entity_id: entity.entity_id}); } ]]]
#            hold_action: !include popup/vardagsrum_tv.yaml  #长按进入harmony的控制界面，
            custom_fields:
              icon_tv: &icon_tv >
                [[[ const style = '<style>@keyframes animate_on{from{transform: scaleY(0);}to{transform: scaleY(1);}}.animate_on{animation: animate_on 1s; transform-origin: -100% 46%; animation-fill-mode: forwards;}@keyframes animate_off{from{transform: scaleY(1);}to{transform: scaleY(0);}}.animate_off{animation: animate_off 1s; transform-origin: -100% 46%; animation-fill-mode: forwards;}</style>';
                const path = '<path d="M46 9.2v27.5H4.1V9.2H46m2.4-2.4H1.6v32.3h46.7c.1 0 .1-32.3.1-32.3zM11.9 43.2h26.3c.6 0 1.1-.4 1.1-1v-.3c0-.6-.4-1.1-1-1.1H11.9c-.6 0-1.1.4-1.1 1v.3a1.11 1.11 0 0 0 1.1 1.1z"/>';
                const gradient = '<linearGradient id="A" gradientUnits="userSpaceOnUse" x1="5.401" y1="34.714" x2="43.817" y2="11.74"><stop offset="0" stop-color="#64acb7"/><stop offset="1" stop-color="#7fdbe9"/></linearGradient>';
                if (entity.state === 'off') { return `<svg viewBox="0 0 50 50"> ${style} ${gradient} <path class="animate_off" d="M2.9,8h44.3v29.9H2.9V8z" fill="url(#A)"/> ${path} </svg>`; }
                if (entity.state === 'on') { return `<svg viewBox="0 0 50 50"> ${style} ${gradient} <path d="M2.9,8h44.3v29.9H2.9V8z" fill="#20262890"/><path class="animate_on" d="M2.9,8h44.3v29.9H2.9V8z" fill="url(#A)"/> ${path} </svg>`; }
                if (entity.state === 'idle' ) { return `<svg viewBox="0 0 50 50"> ${gradient} <path d="M2.9,8h44.3v29.9H2.9V8z" fill="url(#A)"/> ${path} </svg>`; }
                else if (entity.state==='oii' ) { return `<svg viewBox="0 0 50 50"> ${path} </svg>`; } ]]]
#              loading: &loading >
#                [[[ if (entity.state === 'on')  { 
#                return '<img src="/local/loader.svg" width="100%">'; } ]]]
            styles: &icon_tv_styles
              custom_fields:
                icon_tv:
                  [fill: "[[[ return entity.state === 'on' ? '#616161' : '#9da0a2'; ]]]", 
                  top: 7%, left: 10.7%, width: 3.5vw, position: absolute]
            template: switch

          - type: custom:button-card
            entity: cover.livingroom
            name: 客厅窗帘
            style:
              top: 37.9%
              left: 41.31%
              width: 10%
            #  filter: drop-shadow(0 0 0.75rem WhiteSmoke)
            tap_action:
              action: toggle
          #  hold_action: !include popup/sovrum_flakt.yaml
            custom_fields:
              icon_cover: &icon_cover >
                [[[ if (entity.state === 'open') return '<svg id="entks3jq2knq1"
                xmlns="http://www.w3.org/2000/svg"
                xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 24 24"
                shape-rendering="geometricPrecision"
                text-rendering="geometricPrecision"><style><![CDATA[#entks3jq2knq5 {
                animation-name: entks3jq2knq5__tt, entks3jq2knq5_c_o;
                animation-duration: 1000ms; animation-fill-mode: forwards;
                animation-timing-function: linear; animation-direction: reverse;
                animation-iteration-count: 1;   }@keyframes entks3jq2knq5__tt { 0%
                {transform: translate(0px,0px) translate(8.615000px,22.040000px)} 30%
                {transform: translate(0px,0px) translate(8.615000px,22.540000px)} 100%
                {transform: translate(0px,0px) translate(8.615000px,22.540000px)}
                }@keyframes entks3jq2knq5_c_o { 0% {opacity: 0} 30% {opacity: 1} 100%
                {opacity: 1} }#entks3jq2knq6 { animation-name: entks3jq2knq6__tt,
                entks3jq2knq6_c_o; animation-duration: 1000ms; animation-fill-mode:
                forwards; animation-timing-function: linear; animation-direction:
                reverse; animation-iteration-count: 1;   }@keyframes entks3jq2knq6__tt {
                0% {transform: translate(0px,0px) translate(8.615000px,29.460000px)} 10%
                {transform: translate(0px,0px) translate(8.615000px,29.460000px)} 40%
                {transform: translate(0px,0px) translate(8.615000px,29.960000px)} 100%
                {transform: translate(0px,0px) translate(8.615000px,29.960000px)}
                }@keyframes entks3jq2knq6_c_o { 0% {opacity: 0} 10% {opacity: 0} 40%
                {opacity: 1} 100% {opacity: 1} }#entks3jq2knq7 { animation-name:
                entks3jq2knq7__tt, entks3jq2knq7_c_o; animation-duration: 1000ms;
                animation-fill-mode: forwards; animation-timing-function: linear;
                animation-direction: reverse; animation-iteration-count: 1;  
                }@keyframes entks3jq2knq7__tt { 0% {transform: translate(0px,0px)
                translate(8.615000px,36.880000px)} 20% {transform: translate(0px,0px)
                translate(8.615000px,36.880000px)} 50% {transform: translate(0px,0px)
                translate(8.615000px,37.380000px)} 100% {transform: translate(0px,0px)
                translate(8.615000px,37.380000px)} }@keyframes entks3jq2knq7_c_o { 0%
                {opacity: 0} 20% {opacity: 0} 50% {opacity: 1} 100% {opacity: 1}
                }#entks3jq2knq8 { animation-name: entks3jq2knq8__tt, entks3jq2knq8_c_o;
                animation-duration: 1000ms; animation-fill-mode: forwards;
                animation-timing-function: linear; animation-direction: reverse;
                animation-iteration-count: 1;   }@keyframes entks3jq2knq8__tt { 0%
                {transform: translate(0px,0px) translate(8.615000px,44.300000px)} 30%
                {transform: translate(0px,0px) translate(8.615000px,44.300000px)} 60%
                {transform: translate(0px,0px) translate(8.615000px,44.800000px)} 100%
                {transform: translate(0px,0px) translate(8.615000px,44.800000px)}
                }@keyframes entks3jq2knq8_c_o { 0% {opacity: 0} 30% {opacity: 0} 60%
                {opacity: 1} 100% {opacity: 1} }#entks3jq2knq9 { animation-name:
                entks3jq2knq9__tt, entks3jq2knq9_c_o; animation-duration: 1000ms;
                animation-fill-mode: forwards; animation-timing-function: linear;
                animation-direction: reverse; animation-iteration-count: 1;  
                }@keyframes entks3jq2knq9__tt { 0% {transform: translate(0px,0px)
                translate(8.615000px,51.730000px)} 40% {transform: translate(0px,0px)
                translate(8.615000px,51.730000px)} 70% {transform: translate(0px,0px)
                translate(8.615000px,52.230000px)} 100% {transform: translate(0px,0px)
                translate(8.615000px,52.230000px)} }@keyframes entks3jq2knq9_c_o { 0%
                {opacity: 0} 40% {opacity: 0} 70% {opacity: 1} 100% {opacity: 1}
                }#entks3jq2knq10 { animation-name: entks3jq2knq10__tt,
                entks3jq2knq10_c_o; animation-duration: 1000ms; animation-fill-mode:
                forwards; animation-timing-function: linear; animation-direction:
                reverse; animation-iteration-count: 1;   }@keyframes entks3jq2knq10__tt
                { 0% {transform: translate(0px,0px) translate(8.615000px,59.150000px)}
                50% {transform: translate(0px,0px) translate(8.615000px,59.150000px)}
                80% {transform: translate(0px,0px) translate(8.615000px,59.650000px)}
                100% {transform: translate(0px,0px) translate(8.615000px,59.650000px)}
                }@keyframes entks3jq2knq10_c_o { 0% {opacity: 0} 50% {opacity: 0} 80%
                {opacity: 1} 100% {opacity: 1} }]]></style><g id="entks3jq2knq2"
                transform="matrix(0.28549000620842 0 0 0.35877102613449 0.30161800980568
                -2.55328607559204)"><rect id="entks3jq2knq3" width="71.311996"
                height="1.914000" rx="0" ry="0" transform="matrix(1 0 0 1
                4.90700006484985 12.43799972534180)" fill="rgb(161,133,104)"
                stroke="none" stroke-width="1"/><rect id="entks3jq2knq4"
                width="71.311996" height="5.378000" rx="0" ry="0" transform="matrix(1 0
                0 1 4.90700006484985 14.98700046539307)" fill="rgb(87,168,215)"
                stroke="none" stroke-width="1"/><rect id="entks3jq2knq5"
                width="64.583000" height="4.834000" rx="0" ry="0"
                transform="translate(0,0) translate(8.615000,22.540000)"
                fill="rgb(161,133,104)" stroke="none" stroke-width="1"/><rect
                id="entks3jq2knq6" width="64.583000" height="4.834000" rx="0" ry="0"
                transform="translate(0,0) translate(8.615000,29.960000)"
                fill="rgb(161,133,104)" stroke="none" stroke-width="1"/><rect
                id="entks3jq2knq7" width="64.583000" height="4.833000" rx="0" ry="0"
                transform="translate(0,0) translate(8.615000,37.380000)"
                fill="rgb(161,133,104)" stroke="none" stroke-width="1"/><rect
                id="entks3jq2knq8" width="64.583000" height="4.834000" rx="0" ry="0"
                transform="translate(0,0) translate(8.615000,44.800000)"
                fill="rgb(161,133,104)" stroke="none" stroke-width="1"/><rect
                id="entks3jq2knq9" width="64.583000" height="4.834000" rx="0" ry="0"
                transform="translate(0,0) translate(8.615000,52.230000)"
                fill="rgb(161,133,104)" stroke="none" stroke-width="1"
                stroke-opacity="0"/><rect id="entks3jq2knq10" width="64.583000"
                height="4.834000" rx="0" ry="0" transform="translate(0,0)
                translate(8.615000,59.650000)" fill="rgb(161,133,104)" stroke="none"
                stroke-width="1"/><rect id="entks3jq2knq11" width="2.125000"
                height="34.525002" rx="0" ry="0" transform="matrix(1 0 0 1
                4.90700006484985 22.53599929809570)" fill="rgb(87,168,215)"
                stroke="none" stroke-width="1"/><polygon id="entks3jq2knq12"
                points="6.745000,57.499000 5.169000,57.499000 4.898000,58.955000
                7.041000,58.955000" fill="rgb(161,133,104)" stroke="none"
                stroke-width="1"/></g></svg> ';   else return '<svg id="exm5ne46fz2e1"
                xmlns="http://www.w3.org/2000/svg"
                xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 24 24"
                shape-rendering="geometricPrecision"
                text-rendering="geometricPrecision"><style><![CDATA[#exm5ne46fz2e4
                {animation: exm5ne46fz2e4_c_o 1000ms linear 1 normal forwards}@keyframes
                exm5ne46fz2e4_c_o { 0% {opacity: 0.500000} 100% {opacity: 1}
                }#exm5ne46fz2e5 { animation-name: exm5ne46fz2e5__tt, exm5ne46fz2e5_c_o;
                animation-duration: 1000ms; animation-fill-mode: forwards;
                animation-timing-function: linear; animation-direction: normal;
                animation-iteration-count: 1;   }@keyframes exm5ne46fz2e5__tt { 0%
                {transform: translate(0px,0px) translate(8.615000px,22.040000px)} 30%
                {transform: translate(0px,0px) translate(8.615000px,22.540000px)} 100%
                {transform: translate(0px,0px) translate(8.615000px,22.540000px)}
                }@keyframes exm5ne46fz2e5_c_o { 0% {opacity: 0} 30% {opacity: 1} 100%
                {opacity: 1} }#exm5ne46fz2e6 { animation-name: exm5ne46fz2e6__tt,
                exm5ne46fz2e6_c_o; animation-duration: 1000ms; animation-fill-mode:
                forwards; animation-timing-function: linear; animation-direction:
                normal; animation-iteration-count: 1;   }@keyframes exm5ne46fz2e6__tt {
                0% {transform: translate(0px,0px) translate(8.615000px,29.460000px)} 10%
                {transform: translate(0px,0px) translate(8.615000px,29.460000px)} 40%
                {transform: translate(0px,0px) translate(8.615000px,29.960000px)} 100%
                {transform: translate(0px,0px) translate(8.615000px,29.960000px)}
                }@keyframes exm5ne46fz2e6_c_o { 0% {opacity: 0} 10% {opacity: 0} 40%
                {opacity: 1} 100% {opacity: 1} }#exm5ne46fz2e7 { animation-name:
                exm5ne46fz2e7__tt, exm5ne46fz2e7_c_o; animation-duration: 1000ms;
                animation-fill-mode: forwards; animation-timing-function: linear;
                animation-direction: normal; animation-iteration-count: 1;   }@keyframes
                exm5ne46fz2e7__tt { 0% {transform: translate(0px,0px)
                translate(8.615000px,36.880000px)} 20% {transform: translate(0px,0px)
                translate(8.615000px,36.880000px)} 50% {transform: translate(0px,0px)
                translate(8.615000px,37.380000px)} 100% {transform: translate(0px,0px)
                translate(8.615000px,37.380000px)} }@keyframes exm5ne46fz2e7_c_o { 0%
                {opacity: 0} 20% {opacity: 0} 50% {opacity: 1} 100% {opacity: 1}
                }#exm5ne46fz2e8 { animation-name: exm5ne46fz2e8__tt, exm5ne46fz2e8_c_o;
                animation-duration: 1000ms; animation-fill-mode: forwards;
                animation-timing-function: linear; animation-direction: normal;
                animation-iteration-count: 1;   }@keyframes exm5ne46fz2e8__tt { 0%
                {transform: translate(0px,0px) translate(8.615000px,44.300000px)} 30%
                {transform: translate(0px,0px) translate(8.615000px,44.300000px)} 60%
                {transform: translate(0px,0px) translate(8.615000px,44.800000px)} 100%
                {transform: translate(0px,0px) translate(8.615000px,44.800000px)}
                }@keyframes exm5ne46fz2e8_c_o { 0% {opacity: 0} 30% {opacity: 0} 60%
                {opacity: 1} 100% {opacity: 1} }#exm5ne46fz2e9 { animation-name:
                exm5ne46fz2e9__tt, exm5ne46fz2e9_c_o; animation-duration: 1000ms;
                animation-fill-mode: forwards; animation-timing-function: linear;
                animation-direction: normal; animation-iteration-count: 1;   }@keyframes
                exm5ne46fz2e9__tt { 0% {transform: translate(0px,0px)
                translate(8.615000px,51.730000px)} 40% {transform: translate(0px,0px)
                translate(8.615000px,51.730000px)} 70% {transform: translate(0px,0px)
                translate(8.615000px,52.230000px)} 100% {transform: translate(0px,0px)
                translate(8.615000px,52.230000px)} }@keyframes exm5ne46fz2e9_c_o { 0%
                {opacity: 0} 40% {opacity: 0} 70% {opacity: 1} 100% {opacity: 1}
                }#exm5ne46fz2e10 { animation-name: exm5ne46fz2e10__tt,
                exm5ne46fz2e10_c_o; animation-duration: 1000ms; animation-fill-mode:
                forwards; animation-timing-function: linear; animation-direction:
                normal; animation-iteration-count: 1;   }@keyframes exm5ne46fz2e10__tt {
                0% {transform: translate(0px,0px) translate(8.615000px,59.150000px)} 50%
                {transform: translate(0px,0px) translate(8.615000px,59.150000px)} 80%
                {transform: translate(0px,0px) translate(8.615000px,59.650000px)} 100%
                {transform: translate(0px,0px) translate(8.615000px,59.650000px)}
                }@keyframes exm5ne46fz2e10_c_o { 0% {opacity: 0} 50% {opacity: 0} 80%
                {opacity: 1} 100% {opacity: 1} }#exm5ne46fz2e11 {animation:
                exm5ne46fz2e11_c_o 1000ms linear 1 normal forwards}@keyframes
                exm5ne46fz2e11_c_o { 0% {opacity: 0.500000} 100% {opacity: 1}
                }]]></style><g id="exm5ne46fz2e2" transform="matrix(0.28549000620842 0 0
                0.35877102613449 0.30161800980568 -2.55328607559204)"><rect
                id="exm5ne46fz2e3" width="71.311996" height="1.914000" rx="0" ry="0"
                transform="matrix(1 0 0 1 4.90700006484985 12.43799972534180)"
                fill="rgb(95,98,103)" stroke="none" stroke-width="1"/><rect
                id="exm5ne46fz2e4" width="71.311996" height="5.378000" rx="0" ry="0"
                transform="matrix(1 0 0 1 4.90700006484985 14.98700046539307)"
                opacity="0.5" fill="rgb(158,160,162)" stroke="none"
                stroke-width="1"/><rect id="exm5ne46fz2e5" width="64.583000"
                height="4.834000" rx="0" ry="0" transform="translate(0,0)
                translate(8.615000,22.040000)" opacity="0" fill="rgb(95,98,103)"
                stroke="none" stroke-width="1"/><rect id="exm5ne46fz2e6"
                width="64.583000" height="4.834000" rx="0" ry="0"
                transform="translate(0,0) translate(8.615000,29.460000)" opacity="0"
                fill="rgb(95,98,103)" stroke="none" stroke-width="1"/><rect
                id="exm5ne46fz2e7" width="64.583000" height="4.833000" rx="0" ry="0"
                transform="translate(0,0) translate(8.615000,36.880000)" opacity="0"
                fill="rgb(95,98,103)" stroke="none" stroke-width="1"/><rect
                id="exm5ne46fz2e8" width="64.583000" height="4.834000" rx="0" ry="0"
                transform="translate(0,0) translate(8.615000,44.300000)" opacity="0"
                fill="rgb(95,98,103)" stroke="none" stroke-width="1"/><rect
                id="exm5ne46fz2e9" width="64.583000" height="4.834000" rx="0" ry="0"
                transform="translate(0,0) translate(8.615000,51.730000)" opacity="0"
                fill="rgb(95,98,103)" stroke="none" stroke-width="1"
                stroke-opacity="0"/><rect id="exm5ne46fz2e10" width="64.583000"
                height="4.834000" rx="0" ry="0" transform="translate(0,0)
                translate(8.615000,59.150000)" opacity="0" fill="rgb(95,98,103)"
                stroke="none" stroke-width="1"/><rect id="exm5ne46fz2e11"
                width="2.125000" height="34.525002" rx="0" ry="0" transform="matrix(1 0
                0 1 4.90700006484985 22.53599929809570)" opacity="0.5"
                fill="rgb(158,160,162)" stroke="none" stroke-width="1"/><polygon
                id="exm5ne46fz2e12" points="6.745000,57.499000 5.169000,57.499000
                4.898000,58.955000 7.041000,58.955000" fill="rgb(95,98,103)"
                stroke="none" stroke-width="1"/></g></svg>'; ]]]
#              position: >
#                [[[ if (entity.state === 'open') {
#                const volume = states['cover.livingroom'].attributes.current_position;
#                const radius = 20.5; const circumference = radius * 2 * Math.PI;
#                return `<svg viewBox="0 0 50 50"><circle cx="25" cy="25" r="${radius}" stroke="#b2b2b2" stroke-width="1.5" fill="none" style="
#                transform: rotate(-90deg); transform-origin: 50% 50%; stroke-dasharray: ${circumference}; stroke-dashoffset: ${circumference - volume / 100 * circumference};" />
#                <text x="50%" y="54%" fill="#8d8e90" font-size="14" text-anchor="middle" alignment-baseline="middle">${volume}<tspan font-size="10">%</tspan></text></svg>`; } ]]]
            styles: &icon_cover_styles 
              custom_fields:
                icon_cover: 
                  [top: 9%, left: 10%, width: 3vw, position: absolute]
            template: cover


          ##########################################################################
          #                                                                        #
          #                               * 区域二 *                               #
          #                                                                        #
          ##########################################################################

          - prefix: 灯
            <<: *title
            style:
              top: 9.15%
              left: 50.2%
              <<: *title-style

          - type: custom:button-card
            entity: light.menting_xdd
            name: 门厅吸顶灯
            style:
              top: 20.35%
              left: 55.18%
              width: 10%
            custom_fields:
              icon_ceiling_light: *icon_ceiling_light
            styles: *icon_ceiling_light_styles
            template: switch

          - type: custom:button-card
            entity: light.guodao_dd
            name: 走道灯带
            style:
              top: 20.35%
              left: 66.14%
              width: 10%
            custom_fields:
              icon_light_belt: &icon_light_belt >
                [[[ if (entity.state === 'on') return '<svg id="e8ljwnv7m62d1"
                xmlns="http://www.w3.org/2000/svg"
                xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 24 24"
                shape-rendering="geometricPrecision"
                text-rendering="geometricPrecision"><style><![CDATA[#e8ljwnv7m62d2 {
                animation-name: e8ljwnv7m62d2__tt, e8ljwnv7m62d2_c_o;
                animation-duration: 1000ms; animation-fill-mode: forwards;
                animation-timing-function: linear; animation-direction: normal;
                animation-iteration-count: 1;   }@keyframes e8ljwnv7m62d2__tt { 0%
                {transform: translate(0px,0px) translate(0px,0px)} 50% {transform:
                translate(0px,0px) translate(0px,-0.500000px)} 100% {transform:
                translate(0px,0px) translate(0px,0px)} }@keyframes e8ljwnv7m62d2_c_o {
                0% {opacity: 0} 100% {opacity: 1} }]]></style><g id="e8ljwnv7m62d2"
                transform="translate(0,0) translate(0,0)" opacity="0"><path
                id="e8ljwnv7m62d3"
                d="M2.164000,2L1,6.346000L20.801000,11.652000L21.449000,9.238000C21.736000,8.168000,21.106000,7.076000,20.035000,6.789000L2.164000,2ZM4.070000,3.572000C4.153000,3.577000,4.237000,3.591000,4.320000,3.613000C4.987000,3.792000,5.384000,4.478000,5.205000,5.145000C5.026000,5.811000,4.341000,6.206000,3.674000,6.027000C3.007000,5.849000,2.610000,5.163000,2.789000,4.496000C2.945000,3.913000,3.490000,3.537000,4.070000,3.572000ZM7.693000,4.543000C7.776000,4.548000,7.860000,4.562000,7.943000,4.584000C8.610000,4.763000,9.005000,5.448000,8.826000,6.115000C8.647000,6.782000,7.962000,7.177000,7.295000,6.998000C6.628000,6.819000,6.233000,6.134000,6.412000,5.467000C6.568000,4.883000,7.113000,4.508000,7.693000,4.543000ZM11.557000,5.578000C11.640000,5.583000,11.723000,5.597000,11.807000,5.619000C12.473000,5.798000,12.870000,6.484000,12.691000,7.150000C12.513000,7.817000,11.827000,8.212000,11.160000,8.033000C10.493000,7.855000,10.097000,7.169000,10.275000,6.502000C10.432000,5.919000,10.976000,5.543000,11.557000,5.578000ZM15.180000,6.549000C15.263000,6.554000,15.346000,6.568000,15.430000,6.590000C16.096000,6.769000,16.491000,7.454000,16.312000,8.121000C16.134000,8.788000,15.448000,9.183000,14.781000,9.004000C14.114000,8.825000,13.720000,8.140000,13.898000,7.473000C14.055000,6.889000,14.599000,6.514000,15.180000,6.549000ZM18.801000,7.520000C18.884000,7.525000,18.967000,7.538000,19.051000,7.561000C19.718000,7.739000,20.114000,8.425000,19.935000,9.092000C19.757000,9.759000,19.071000,10.153000,18.404000,9.975000C17.737000,9.796000,17.341000,9.110000,17.519000,8.443000C17.676000,7.860000,18.220000,7.485000,18.801000,7.520000ZM3.197000,12.348000L2.551000,14.762000C2.264000,15.832000,2.895000,16.924000,3.965000,17.211000L21.836000,22L23,17.654000L3.197000,12.348000ZM5.346000,13.984000C5.429000,13.989000,5.512000,14.003000,5.596000,14.025000C6.262000,14.204000,6.659000,14.890000,6.480000,15.557000C6.302000,16.223000,5.616000,16.618000,4.949000,16.439000C4.282000,16.261000,3.886000,15.575000,4.064000,14.908000C4.221000,14.325000,4.765000,13.950000,5.346000,13.984000ZM8.969000,14.955000C9.052000,14.960000,9.135000,14.974000,9.219000,14.996000C9.885000,15.175000,10.280000,15.861000,10.101000,16.527000C9.923000,17.194000,9.237000,17.589000,8.570000,17.410000C7.903000,17.231000,7.509000,16.546000,7.687000,15.879000C7.844000,15.295000,8.388000,14.920000,8.969000,14.955000ZM12.590000,15.926000C12.673000,15.931000,12.756000,15.944000,12.840000,15.967000C13.507000,16.145000,13.903000,16.831000,13.724000,17.498000C13.546000,18.165000,12.860000,18.560000,12.193000,18.381000C11.526000,18.202000,11.130000,17.516000,11.308000,16.850000C11.465000,16.266000,12.009000,15.891000,12.590000,15.926000ZM16.453000,16.961000C16.536000,16.966000,16.620000,16.980000,16.703000,17.002000C17.370000,17.181000,17.766000,17.866000,17.588000,18.533000C17.409000,19.200000,16.723000,19.595000,16.057000,19.416000C15.390000,19.237000,14.995000,18.552000,15.174000,17.885000C15.330000,17.301000,15.873000,16.926000,16.453000,16.961000ZM20.076000,17.932000C20.159000,17.937000,20.243000,17.950000,20.326000,17.973000C20.993000,18.151000,21.388000,18.837000,21.209000,19.504000C21.030000,20.171000,20.346000,20.565000,19.680000,20.387000C19.013000,20.208000,18.616000,19.522000,18.795000,18.856000C18.951000,18.272000,19.496000,17.897000,20.076000,17.932000Z"
                fill="rgb(248,205,65)" stroke="none" stroke-width="1"/></g><g
                id="e8ljwnv7m62d4"><path id="e8ljwnv7m62d5"
                d="M11.483000,10.234000L5.121000,11.943000L12.637000,13.956000L18.998000,12.247000L11.483000,10.234000Z"
                fill="rgb(87,168,215)" stroke="none" stroke-width="1"/></g></svg> '
                ;   else return '<svg id="ei7lu4mye7q1"
                xmlns="http://www.w3.org/2000/svg"
                xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 24 24"
                shape-rendering="geometricPrecision"
                text-rendering="geometricPrecision"><style><![CDATA[#ei7lu4mye7q2 {
                animation-name: ei7lu4mye7q2__tt, ei7lu4mye7q2_c_o; animation-duration:
                1000ms; animation-fill-mode: forwards; animation-timing-function:
                linear; animation-direction: normal; animation-iteration-count: 1;  
                }@keyframes ei7lu4mye7q2__tt { 0% {transform: translate(0px,0px)
                translate(0px,0px)} 50% {transform: translate(0px,0px)
                translate(0px,-0.500000px)} 100% {transform: translate(0px,0px)
                translate(0px,0px)} }@keyframes ei7lu4mye7q2_c_o { 0% {opacity: 1} 100%
                {opacity: 0.500000} }]]></style><g id="ei7lu4mye7q2"
                transform="translate(0,0) translate(0,0)"><path id="ei7lu4mye7q3"
                d="M2.164000,2L1,6.346000L20.801000,11.652000L21.449000,9.238000C21.736000,8.168000,21.106000,7.076000,20.035000,6.789000L2.164000,2ZM4.070000,3.572000C4.153000,3.577000,4.237000,3.591000,4.320000,3.613000C4.987000,3.792000,5.384000,4.478000,5.205000,5.145000C5.026000,5.811000,4.341000,6.206000,3.674000,6.027000C3.007000,5.849000,2.610000,5.163000,2.789000,4.496000C2.945000,3.913000,3.490000,3.537000,4.070000,3.572000ZM7.693000,4.543000C7.776000,4.548000,7.860000,4.562000,7.943000,4.584000C8.610000,4.763000,9.005000,5.448000,8.826000,6.115000C8.647000,6.782000,7.962000,7.177000,7.295000,6.998000C6.628000,6.819000,6.233000,6.134000,6.412000,5.467000C6.568000,4.883000,7.113000,4.508000,7.693000,4.543000ZM11.557000,5.578000C11.640000,5.583000,11.723000,5.597000,11.807000,5.619000C12.473000,5.798000,12.870000,6.484000,12.691000,7.150000C12.513000,7.817000,11.827000,8.212000,11.160000,8.033000C10.493000,7.855000,10.097000,7.169000,10.275000,6.502000C10.432000,5.919000,10.976000,5.543000,11.557000,5.578000ZM15.180000,6.549000C15.263000,6.554000,15.346000,6.568000,15.430000,6.590000C16.096000,6.769000,16.491000,7.454000,16.312000,8.121000C16.134000,8.788000,15.448000,9.183000,14.781000,9.004000C14.114000,8.825000,13.720000,8.140000,13.898000,7.473000C14.055000,6.889000,14.599000,6.514000,15.180000,6.549000ZM18.801000,7.520000C18.884000,7.525000,18.967000,7.538000,19.051000,7.561000C19.718000,7.739000,20.114000,8.425000,19.935000,9.092000C19.757000,9.759000,19.071000,10.153000,18.404000,9.975000C17.737000,9.796000,17.341000,9.110000,17.519000,8.443000C17.676000,7.860000,18.220000,7.485000,18.801000,7.520000ZM3.197000,12.348000L2.551000,14.762000C2.264000,15.832000,2.895000,16.924000,3.965000,17.211000L21.836000,22L23,17.654000L3.197000,12.348000ZM5.346000,13.984000C5.429000,13.989000,5.512000,14.003000,5.596000,14.025000C6.262000,14.204000,6.659000,14.890000,6.480000,15.557000C6.302000,16.223000,5.616000,16.618000,4.949000,16.439000C4.282000,16.261000,3.886000,15.575000,4.064000,14.908000C4.221000,14.325000,4.765000,13.950000,5.346000,13.984000ZM8.969000,14.955000C9.052000,14.960000,9.135000,14.974000,9.219000,14.996000C9.885000,15.175000,10.280000,15.861000,10.101000,16.527000C9.923000,17.194000,9.237000,17.589000,8.570000,17.410000C7.903000,17.231000,7.509000,16.546000,7.687000,15.879000C7.844000,15.295000,8.388000,14.920000,8.969000,14.955000ZM12.590000,15.926000C12.673000,15.931000,12.756000,15.944000,12.840000,15.967000C13.507000,16.145000,13.903000,16.831000,13.724000,17.498000C13.546000,18.165000,12.860000,18.560000,12.193000,18.381000C11.526000,18.202000,11.130000,17.516000,11.308000,16.850000C11.465000,16.266000,12.009000,15.891000,12.590000,15.926000ZM16.453000,16.961000C16.536000,16.966000,16.620000,16.980000,16.703000,17.002000C17.370000,17.181000,17.766000,17.866000,17.588000,18.533000C17.409000,19.200000,16.723000,19.595000,16.057000,19.416000C15.390000,19.237000,14.995000,18.552000,15.174000,17.885000C15.330000,17.301000,15.873000,16.926000,16.453000,16.961000ZM20.076000,17.932000C20.159000,17.937000,20.243000,17.950000,20.326000,17.973000C20.993000,18.151000,21.388000,18.837000,21.209000,19.504000C21.030000,20.171000,20.346000,20.565000,19.680000,20.387000C19.013000,20.208000,18.616000,19.522000,18.795000,18.856000C18.951000,18.272000,19.496000,17.897000,20.076000,17.932000Z"
                fill="rgb(158,160,162)" stroke="none" stroke-width="1"/></g><g
                id="ei7lu4mye7q4"><path id="ei7lu4mye7q5"
                d="M11.483000,10.234000L5.121000,11.943000L12.637000,13.956000L18.998000,12.247000L11.483000,10.234000Z"
                fill="rgb(95,98,103)" stroke="none" stroke-width="1"/></g></svg>'; ]]]
            styles: &icon_light_belt_styles
              custom_fields:
                icon_light_belt: 
                  [top: 11.5%, left: 8%, width: 2.7vw, position: absolute]
            template: switch

          - type: custom:button-card
            entity: light.dianshiqiang_dd
            name: 电视墙灯带
            style:
              top: 37.9%
              left: 55.18%
              width: 10%
            #  filter: drop-shadow(0 0 0.25rem WhiteSmoke)
            custom_fields:
              icon_light_belt: *icon_light_belt
            styles: *icon_light_belt_styles
            template: switch

          - type: custom:button-card
            entity: light.dianshiqiang_td
            name: 电视墙筒灯
            style:
              top: 37.9%
              left: 66.14%
              width: 10%
#            tap_action:
#              action: toggle
            custom_fields:
              icon_spot: &icon_spot >
                [[[ const state = entity.state === 'on' ? 'animate_on' : 'animate_off';
                return `<svg viewBox="0 0 50 50"><style>@keyframes animate_on{0%{transform: rotateZ(0deg); animation-timing-function: cubic-bezier(0.7, 0, 0.84, 0);}70%{transform: rotateZ(-15deg); animation-timing-function: cubic-bezier(0.16, 1, 0.3, 1);}75%{transform: rotateZ(-15deg); animation-timing-function: cubic-bezier(0.16, 1, 0.3, 1);}88%{transform: rotateZ(-11deg);}100%{transform: rotateZ(-15deg);}}.animate_on{animation: animate_on 0.7s; transform-origin: 40% 20%; animation-fill-mode: forwards; animation-delay: -0.1s;}@keyframes animate_off{0%{transform: rotateZ(-15deg); animation-timing-function: cubic-bezier(0.7, 0, 0.84, 0);}70%{transform: rotateZ(0deg); animation-timing-function: cubic-bezier(0.16, 1, 0.3, 1);}75%{transform: rotateZ(0deg); animation-timing-function: cubic-bezier(0.16, 1, 0.3, 1);}88%{transform: rotateZ(-4deg);}100%{transform: rotateZ(0deg);}}.animate_off{animation: animate_off 0.7s; transform-origin: 40% 20%; animation-fill-mode: forwards;}</style>
                <path style="clip-path: url(#mask);" fill="#9da0a2" d="M40.5.8H17.1c-.1 0-.1 0-.1.1A3.12 3.12 0 0 0 20.1 4h6.1c.1 0 .1 0 .1.1v7.4L18 19.1l3.6 3.5 9.1-8.6c.4-.4.6-1 .7-1.6V4c0-.1 0-.1.1-.1h6c1.7.1 3.1-1.3 3-3.1z"/><defs><clipPath id="mask"><path class="${state}" d="M0 9.1h24l8.3 8.8H50V-9H0z"/></clipPath></defs><path class="${state}" fill="var(--button-card-light-color-no-temperature)" d="M25.5 46.4s1.4.5 10.4-8.2c.5-.4 6.3-6.3 5.8-7.1-.7-.8-18.6-19.5-18.6-19.5s-.6-.9-8.6 6.4c-.6.5-8.7 8-7.7 9.1l18.7 19.3z"/></svg>`; ]]]
            styles: &icon_spot_styles
              custom_fields:
                icon_spot:
                  [top: 11.5%, left: 8%, width: 2.7vw, position: absolute]
            template: switch

          ##########################################################################
          #                                                                        #
          #                               * 区域三 *                               #
          #                                                                        #
          ##########################################################################

          - prefix: 温湿度
            <<: *title
            style:
              top: 9.15%
              left: 75.1%
              <<: *title-style

          #################################################
          #                                               #
          #                 MATTIAS LIGHT                 #
          #                                               #
          #################################################

          - type: custom:button-card
            entity: climate.livingroom_acpartner
            name: 客厅空调
            style:
              top: 20.35%
              left: 80.05%
              width: 10%
            custom_fields:
              icon_climate: &icon_climate >
                [[[ const state = entity.attributes.temperature; 
                return `<svg viewBox="0 0 50 50"><circle cx="25" cy="25" r="20.5" stroke="#b2b2b2" stroke-width="1.5" fill="none" />
                <text x="50%" y="54%" fill="#8d8e90" font-size="14" text-anchor="middle" alignment-baseline="middle">${state}°C</text></svg>`; ]]]
            styles: &icon_climate_styles
              custom_fields:
                icon_climate: 
                  [top: 9%, left: 10%, width: 3vw, position: absolute]
            template: climate

          - type: custom:button-card
            entity: fan.xiaomi_smart_fan
            name: 客厅风扇
            style:
              top: 20.35%
              left: 91.05%
              width: 10%
            tap_action:
              action: toggle
            hold_action: !include popup/sovrum_flakt.yaml
            custom_fields:
              icon_fan: &icon_fan >
                [[[ const path = '<circle cx="25" cy="25" r="6.6"/> <path d="M31.9 30.4c-.5.6-1.1 1.1-1.7 1.5-1.4 1.1-3.2 1.7-5.2 1.7-2.3 0-4.5-.9-6-2.4-.9 1.1-1.6 2.3-2.3 3.2l-4.9 5.4c-1.8 2.7.3 5.6 2.5 7 3.9 2.4 9.8 3.1 14.1 1.9 4.6-1.3 7.9-4.7 7.4-9.7-.2-3.4-1.9-6-3.9-8.6zM17 28.3c-.4-1-.6-2.1-.6-3.3a8.7 8.7 0 0 1 6.4-8.4l-1.6-3.5L19 6.2c-1.5-2.8-5-2.5-7.3-1.2-4 2.2-7.5 6.9-8.7 11.3-1.2 4.6.2 9.2 4.7 11.3 3.1 1.3 6.1 1.2 9.3.7zm26.9-17.6c-3.3-3.4-8-4.6-12.1-1.8-2.8 1.8-4.2 4.6-5.5 7.5 4.2.6 7.4 4.2 7.4 8.6 0 .9-.1 1.7-.4 2.5 1.3.2 2.8.3 3.8.4 2.3.4 4.7 1.3 7.1 1.7 3.2.3 4.7-3 4.8-5.6.3-4.6-1.9-10.1-5.1-13.3z"/>';
                const style='<svg viewBox="0 0 50 50"> <style>@keyframes rotate{0%{visibility: visible; transform: rotate(0deg);}100%{transform: rotate(1080deg);}}.start{animation: rotate 2.8s ease-in; transform-origin: center; fill: #5daeea; visibility: hidden;}.on{animation: rotate 1.8s linear infinite; transform-origin: center; fill: #5daeea; animation-delay: 2.8s; visibility: hidden;}.end{animation: rotate 2.8s; transform-origin: center; fill: #9ca2a5; animation-timing-function: cubic-bezier(0.61, 1, 0.88, 1);}</style>';
                if (entity.state === 'on') { return `${style}<g class="start">${path}</g><g class="on">${path}</g></svg>`; }
                else { return `${style}<g class="end">${path}</g></svg>`; } ]]]
            styles: &icon_fan_styles
              custom_fields:
                icon_fan:
                  [top: 9%, left: 10%, width: 3vw, position: absolute]
            template: switch

          - type: custom:button-card
            entity: sensor.m1_humidity
            name: 客厅湿度
            style:
              top: 37.9%
              left: 80.05%
              width: 10%
            tap_action:
              action: more-info
          #  hold_action: !include popup/studio_monitorer.yaml
            custom_fields:
              icon_humidity: &icon_humidity >
                [[[ const state = entity.state; 
                return `<svg viewBox="0 0 50 50"><circle cx="25" cy="25" r="20.5" stroke="#b2b2b2" stroke-width="1.5" fill="none" />
                <text x="50%" y="54%" fill="#8d8e90" font-size="10" text-anchor="middle" alignment-baseline="middle">${state}%</text></svg>`; ]]]
            styles: &icon_humidity_styles 
              custom_fields:
                icon_humidity: 
                  [top: 11%, left: 7%, width: 2.8vw, position: absolute]
                volume: *circle_pos
            template: sensors

          - type: custom:button-card
            entity: sensor.m1_temperature
            name: 客厅温度
            style:
              top: 37.9%
              left: 91.05%
              width: 10%
            tap_action:
              action: more-info
          #  hold_action: !include popup/studio_monitorer.yaml
            custom_fields:
              icon_temperature: &icon_temperature >
                [[[ const state = entity.state; 
                return `<svg viewBox="0 0 50 50"><circle cx="25" cy="25" r="20.5" stroke="#b2b2b2" stroke-width="1.5" fill="none" />
                <text x="50%" y="54%" fill="#8d8e90" font-size="10" text-anchor="middle" alignment-baseline="middle">${state}°C</text></svg>`; ]]]
            styles: &icon_temperature_styles 
              custom_fields:
                icon_temperature: 
                  [top: 11%, left: 7%, width: 2.8vw, position: absolute]
                volume: *circle_pos
            template: sensors
 
          - prefix: 播放器
            <<: *title
            style:
              top: 53.4%
              left: 25.4%
              <<: *title-style
          - type: custom:swipe-card
            start_card: 1
            parameters:
              roundLengths: true
              effect: coverflow
              speed: 650
              spaceBetween: 20
              threshold: 7
              coverflowEffect:
                rotate: 80
                depth: 300
              pagination:
                type: 'bullets'
                dynamicBullets: false
            style:
              top: 58.55%
              left: 35.8%
              width: 20.97%
              height: 1px
              --ha-card-background: none
              --ha-card-border-radius: .88vw
              --ha-card-box-shadow: none
              image-rendering: crisp-edges
            cards:
              - type: picture-elements
                image: "data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 50 50' /%3E"
                elements:
                  - type: conditional
                    conditions:
                      - entity: sensor.harmony_activity
                        state: 'PowerOff'
                    elements:
                      - type: custom:button-card
                        entity: sensor.placeholder
                        triggers_update:
                          ['sensor.plex_title', 'sensor.plex_poster']
                        name: 最近添加电影
                        state_display: >
                          [[[ return states['sensor.plex_title'].state; ]]]
                        custom_fields:
                          icon: >
                            <svg viewBox="0 0 50 50"><path d="M7.7.3h34.6c4.1 0 7.4 3.3 7.4 7.4v34.6c0 4.1-3.3 7.4-7.4 7.4H7.7c-4.1 0-7.4-3.3-7.4-7.4V7.7C.3 3.6 3.6.3 7.7.3z" fill="#282a2d"/><path d="M25,7.1H14.6L25,25L14.6,42.9H25L35.4,25L25,7.1z" fill="#e5a00d"/></svg>
                          blur: >
                            <svg viewBox="0 0 50 50" />
                        styles:
                          custom_fields:
                            media_image: &plex_poster
                              [background-position: center center, background-image: 
                              "[[[ return 'url(' + states['sensor.plex_poster'].state + ')'; ]]]"]
                            blur: *plex_poster
                            overlay: [background: 'rgba(0, 0, 0, 0.4)']
                          card:
                            [color: '#efefef', text-shadow: '1px 1px 5px rgba(18, 22, 23, 0.9)']
                        tap_action:
                          action: none
                        style:
                          top: 50%
                          left: 50%
                          width: 100%
                        template: media

                  - type: conditional
                    conditions:
                      - entity: sensor.harmony_activity
                        state: 'LivingroomGames'
                    elements:
                      - type: custom:button-card
                        entity: media_player.baba_xboxone
                        custom_fields:
                          icon: &icon_xbox >
                            <svg viewBox="0 0 24 24"><path d="M6.43,3.72C6.5,3.66 6.57,3.6 6.62,3.56C8.18,2.55 10,2 12,2C13.88,2 15.64,2.5 17.14,3.42C17.25,3.5 17.54,3.69 17.7,3.88C16.25,2.28 12,5.7 12,5.7C10.5,4.57 9.17,3.8 8.16,3.5C7.31,3.29 6.73,3.5 6.46,3.7M19.34,5.21C19.29,5.16 19.24,5.11 19.2,5.06C18.84,4.66 18.38,4.56 18,4.59C17.61,4.71 15.9,5.32 13.8,7.31C13.8,7.31 16.17,9.61 17.62,11.96C19.07,14.31 19.93,16.16 19.4,18.73C21,16.95 22,14.59 22,12C22,9.38 21,7 19.34,5.21M15.73,12.96C15.08,12.24 14.13,11.21 12.86,9.95C12.59,9.68 12.3,9.4 12,9.1C12,9.1 11.53,9.56 10.93,10.17C10.16,10.94 9.17,11.95 8.61,12.54C7.63,13.59 4.81,16.89 4.65,18.74C4.65,18.74 4,17.28 5.4,13.89C6.3,11.68 9,8.36 10.15,7.28C10.15,7.28 9.12,6.14 7.82,5.35L7.77,5.32C7.14,4.95 6.46,4.66 5.8,4.62C5.13,4.67 4.71,5.16 4.71,5.16C3.03,6.95 2,9.35 2,12A10,10 0 0,0 12,22C14.93,22 17.57,20.74 19.4,18.73C19.4,18.73 19.19,17.4 17.84,15.5C17.53,15.07 16.37,13.69 15.73,12.96Z"/></svg>
                        style:
                          top: 50%
                          left: 50%
                          width: 100%
                        template: media

                  - type: conditional
                    conditions:
                      - entity: sensor.harmony_activity
                        state: 'LivingroomAppleTV'
                    elements:
                      - type: custom:button-card
                        entity: media_player.appletv
                        custom_fields:
                          icon: &icon_apple_tv >
                            <svg viewBox="0 0 24 24"><path d="M25.2 49.7l-13.7-.1c-2.4 0-4.6-.8-6.5-2.2-2-1.6-3.6-3.6-4.3-6.2-.2-1-.2-1.9-.3-3V11.5C.5 7.9 1.9 5 4.8 2.7 6.2 1.6 7.8.8 9.6.5c.5-.1.9-.1 1.4-.1L27.5.3l10.9.1c2.6 0 4.8.8 6.7 2.4 2.1 1.7 3.7 3.9 4.2 6.6l.2 2.4.1 20.5-.1 6.7c-.1 2.2-.9 4.2-2.2 5.9-1.7 2.2-4 3.8-6.8 4.4-.6.1-1.2.2-1.9.2-.1.1-13.4.2-13.4.2zm-4-27.8c-.9-1.2-2.2-1.6-3.7-1.2-.4.1-.8.2-1.2.4-.3.1-.6.1-.8 0-.4-.1-.8-.3-1.2-.4-.3-.1-.7-.1-1-.1-1.5.2-2.4 1.1-3 2.6-.4 1.1-.3 2.2 0 3.5.4 1.5 1 2.9 2.1 4 .5.6 1.2.9 2 .6 1.1-.5 2.2-.5 3.4 0 .8.3 1.5 0 2.1-.6.7-.8 1.1-1.8 1.6-2.8v-.2c-1-.6-1.7-1.4-1.8-2.7-.2-1.4.5-2.4 1.5-3.1zm9.9-1.4c.1.2.1.3.1.4l3.6 9.5c.1.3.3.4.6.4h.7c.6 0 .6 0 .9-.6l3.7-9.4c.1-.1.1-.3.2-.5H39l-2.9 8.3-3.1-8.3-1.9.2zM27.3 18l-1.3.4c-.5.2-.5.2-.6.7v1.4h-1.6l.1 1.4h1.5v5c0 .7.1 1.4.2 2.1.1.5.3 1 .8 1.4.8.6 2.6.7 3.5.2l-.1-1.2h-1.3c-.5 0-.9-.3-1-.8-.1-.3-.2-.6-.2-1v-5.8H30c0-.5.1-1 0-1.4h-2.7V18zm-8.8-.9c-1.9.3-3 2-2.7 3.2 1.4.2 2.9-1.7 2.7-3.2z"/></svg>
                        style:
                          top: 50%
                          left: 50%
                          width: 100%
                        template: media

                  - type: conditional
                    conditions:
                      - entity: sensor.harmony_activity
                        state: 'LivingroomGoogleTV'
                    elements:
                      - type: custom:button-card
                        entity: media_player.android_tv
                        name: AndroidTV
                        custom_fields:
                          icon: &icon_android_tv >
                            <svg viewBox="0 0 24 24"><path d="M21.35,11.1H12.18V13.83H18.69C18.36,17.64 15.19,19.27 12.19,19.27C8.36,19.27 5,16.25 5,12C5,7.9 8.2,4.73 12.2,4.73C15.29,4.73 17.1,6.7 17.1,6.7L19,4.72C19,4.72 16.56,2 12.1,2C6.42,2 2.03,6.8 2.03,12C2.03,17.05 6.16,22 12.25,22C17.6,22 21.5,18.33 21.5,12.91C21.5,11.76 21.35,11.1 21.35,11.1V11.1Z" /></svg>
                        style:
                          top: 50%
                          left: 50%
                          width: 100%
                        template: media

                  - type: conditional
                    conditions:
                      - entity: sensor.harmony_activity
                        state: 'LivingroomOppoPlayer'
                    elements:
                      - type: custom:button-card
                        entity: media_player.forked_daapd_output_oppo_udp_203
                        custom_fields:
                          icon: &icon_oppo >
                            <svg viewBox="0 0 24 24"><path d="M14.5,10.37C15.54,10.37 16.38,9.53 16.38,8.5C16.38,7.46 15.54,6.63 14.5,6.63C13.46,6.63 12.63,7.46 12.63,8.5A1.87,1.87 0 0,0 14.5,10.37M14.5,1A7.5,7.5 0 0,1 22,8.5C22,10.67 21.08,12.63 19.6,14H9.4C7.93,12.63 7,10.67 7,8.5C7,4.35 10.36,1 14.5,1M6,21V22H4V21H2V15H22V21H20V22H18V21H6M4,18V19H13V18H4M15,17V19H17V17H15M19,17A1,1 0 0,0 18,18A1,1 0 0,0 19,19A1,1 0 0,0 20,18A1,1 0 0,0 19,17Z" /></svg>
                        style:
                          top: 50%
                          left: 50%
                          width: 100%
                        template: media

                  - type: conditional
                    conditions:
                      - entity: sensor.harmony_activity
                        state: 'LivingroomSonyTV'
                    elements:
                      - type: custom:button-card
                        entity: media_player.sony_tv
                        custom_fields:
                          icon_tv2: &icon_tv2 >
                            [[[ const style = '<style>@keyframes animate_on{from{transform: scaleY(0);}to{transform: scaleY(1);}}.animate_on{animation: animate_on 1s; transform-origin: -100% 46%; animation-fill-mode: forwards;}@keyframes animate_off{from{transform: scaleY(1);}to{transform: scaleY(0);}}.animate_off{animation: animate_off 1s; transform-origin: -100% 46%; animation-fill-mode: forwards;}</style>';
                            const path = '<path d="M46 9.2v27.5H4.1V9.2H46m2.4-2.4H1.6v32.3h46.7c.1 0 .1-32.3.1-32.3zM11.9 43.2h26.3c.6 0 1.1-.4 1.1-1v-.3c0-.6-.4-1.1-1-1.1H11.9c-.6 0-1.1.4-1.1 1v.3a1.11 1.11 0 0 0 1.1 1.1z"/>';
                            const gradient = '<linearGradient id="A" gradientUnits="userSpaceOnUse" x1="5.401" y1="34.714" x2="43.817" y2="11.74"><stop offset="0" stop-color="#64acb7"/><stop offset="1" stop-color="#7fdbe9"/></linearGradient>';
                            if (entity.state === 'off') { return `<svg viewBox="0 0 50 50"> ${style} ${gradient} <path class="animate_off" d="M2.9,8h44.3v29.9H2.9V8z" fill="url(#A)"/> ${path} </svg>`; }
                            if (entity.state === 'on') { return `<svg viewBox="0 0 50 50"> ${style} ${gradient} <path d="M2.9,8h44.3v29.9H2.9V8z" fill="#20262890"/><path class="animate_on" d="M2.9,8h44.3v29.9H2.9V8z" fill="url(#A)"/> ${path} </svg>`; }
                            if (entity.state === 'idle' ) { return `<svg viewBox="0 0 50 50"> ${gradient} <path d="M2.9,8h44.3v29.9H2.9V8z" fill="url(#A)"/> ${path} </svg>`; }
                            else if (entity.state==='oii' ) { return `<svg viewBox="0 0 50 50"> ${path} </svg>`; } ]]]
                        style:
                          top: 50%
                          left: 50%
                          width: 100%
                        template: media

                  - type: conditional
                    conditions:
                      - entity: sensor.harmony_activity
                        state: 'LivingroomXboxMusic'
                    elements:
                      - type: custom:button-card
                        entity: media_player.forked_daapd_output_oppo_udp_203
                        custom_fields:
                          icon: *icon_xbox
                        style:
                          top: 50%
                          left: 50%
                          width: 100%
                        template: media
                #################################################
                #                                               #
                #                    * 第二页 *                 #
                #                                               #
                #################################################

              - type: picture-elements
                image: "data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 50 50' /%3E"
                elements:
                  - type: custom:button-card
                    entity: media_player.appletv
                    custom_fields:
                      icon: *icon_apple_tv
                    style:
                      top: 23.9%
                      left: 23.8%
                      width: 47.7%
                    template: media_small

                  - type: custom:button-card
                    entity: media_player.android_tv
                    custom_fields:
                      icon: *icon_android_tv
                    style:
                      top: 23.9%
                      left: 76.2%
                      width: 47.7%
                    template: media_small

                  - type: custom:button-card
                    entity: media_player.baba_xboxone
                    name: Xbox
                    custom_fields:
                      icon: *icon_xbox
                    style:
                      top: 76.2%
                      left: 23.8%
                      width: 47.7%
                    template: media_small

                  - type: custom:button-card
                    entity: media_player.forked_daapd_output_oppo_udp_203
                    name: Oppo
                    custom_fields:
                      icon: *icon_oppo
                    style:
                      top: 76.2%
                      left: 76.2%
                      width: 47.7%
                    template: media_small


                #################################################
                #                                               #
                #                    * 第三页 *                 #
                #                                               #
                #################################################

              - type: picture-elements
                image: "data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 50 50' /%3E"
                elements:
                  - type: custom:button-card
                    entity: media_player.men_ting_googlehomemini
                    name: 门厅
                    custom_fields:
                      icon: &icon_google_mini >
                        <svg viewBox="0 0 50 50"><path d="M49.7 25c0 13.6-11.1 24.7-24.8 24.7C11.3 49.7.3 38.6.3 25S11.4.3 25 .3 49.7 11.4 49.7 25zm-33.9 0a2.22 2.22 0 0 0-2.2-2.2c-1.2 0-2.3 1-2.3 2.2a2.22 2.22 0 0 0 2.2 2.2c1.3.1 2.3-.9 2.3-2.2h0zm10.8 0c0 1.2.9 2.2 2.2 2.3 1.3 0 2.3-1 2.3-2.2 0-1.3-1-2.3-2.2-2.3-1.3 0-2.3.9-2.3 2.2zm-3.2 0a2.22 2.22 0 0 0-2.2-2.2c-1.2 0-2.3 1-2.3 2.2a2.22 2.22 0 0 0 2.2 2.2c1.3 0 2.3-.9 2.3-2.2h0zm13 2.2a2.22 2.22 0 0 0 2.2-2.2c0-1.2-1-2.3-2.2-2.3a2.22 2.22 0 0 0-2.2 2.2c0 1.3 1 2.3 2.2 2.3z" /></svg>
                    style:
                      top: 23.9%
                      left: 23.8%
                      width: 47.7%
                    template: media_small

                  - type: custom:button-card
                    entity: media_player.ke_ting_googlehomemini
                    name: 客厅
                    custom_fields:
                      icon: *icon_google_mini
                    style:
                      top: 23.9%
                      left: 76.2%
                      width: 47.7%
                    template: media_small

                  - type: custom:button-card
                    entity: media_player.zhu_wo_googlehomemini
                    name: 主卧
                    custom_fields:
                      icon: *icon_google_mini
                    style:
                      top: 76.2%
                      left: 23.8%
                      width: 47.7%
                    template: media_small

                  - type: custom:button-card
                    entity: media_player.ci_wo_googlehomemini
                    name: 次卧
                    custom_fields:
                      icon: *icon_google_mini
                    style:
                      top: 76.2%
                      left: 76.2%
                      width: 47.7%
                    template: media_small

                #################################################
                #                                               #
                #                    * 第三页 *                 #
                #                                               #
                #################################################

              - type: picture-elements
                image: "data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 50 50' /%3E"
                elements:
                  - type: custom:button-card
                    entity: media_player.ce_suo_googlehomemini
                    name: 厕所
                    custom_fields:
                      icon: *icon_google_mini
                    style:
                      top: 23.9%
                      left: 23.8%
                      width: 47.7%
                    template: media_small


          - prefix: 安防
            <<: *title
            style:
              top: 53.4%
              left: 50.2%
              <<: *title-style

          #################################################
          #                                               #
          #                    区域五                     #
          #                                               #
          #################################################

          - type: custom:button-card
            entity: binary_sensor.door_window_sensor_158d0002014310
            name: 入户门
            style:
              top: 64.5%
              left: 55.18%
              width: 10%
            custom_fields:
              icon_closet: >
                [[[ const state = entity.state === 'on' ? 'door' : 'door reverse'; const opacity = entity.state === 'on' ? 'room' : 'room reverse';
                return `<svg viewBox="0 0 50 50"> <style>.door{animation: door 0.4s cubic-bezier(0.250, 0.460, 0.450, 0.940) both;}.room{animation: room 0.4s cubic-bezier(0.250, 0.460, 0.450, 0.940) both;}.reverse{animation-direction: reverse;}@keyframes door{0%{transform: none; fill: #9da0a2;}100%{transform: skewY(10deg) translate(4.5%, -3.9%) scaleX(0.8); fill: #b68349;}}@keyframes room{0%{opacity: 0;}100%{opacity: 1;}}</style>
                <path class="${opacity}" d="M11.4,1.4h27.2v43.1H11.4V1.4z" fill="#bcbcbc"/><path class="${state}" d="M11.4 1.4v43.1h27.2V1.4H11.4zm23 23.4c0 1.1-.9 1.9-1.9 1.9h0c-1.1 0-1.9-.9-1.9-1.9V21c0-1.1.9-1.9 1.9-1.9h0c1.1 0 1.9.9 1.9 1.9v3.8z"/></svg>`; ]]]
            styles:
              custom_fields:
                icon_closet:
                  [top: 11%, left: 4.1%, width: 3.2vw, position: absolute]
            template: sensors

          - type: custom:button-card
            entity: alarm_control_panel.home_alarm
            name: 安防系统
            style:
              top: 64.5%
              left: 66.14%
              width: 10%
            custom_fields:
              icon_motion: >
                <svg viewBox="0 0 25 25"><path d="M11,13H13V16H16V11H18L12,6L6,11H8V16H11V13M12,1L21,5V11C21,16.55 17.16,21.74 12,23C6.84,21.74 3,16.55 3,11V5L12,1Z" fill="var(--button-card-light-color-no-temperature)"/></svg>
            styles:
              custom_fields:
                icon_motion:
                  [top: 11%, left: 4.1%, width: 3.2vw, position: absolute]
            template: sensors

          - type: custom:button-card
            entity: camera.ezviz02
            name: 门口摄像机
            style:
              top: 82.1%
              left: 55.18%
              width: 10%
            custom_fields:
              icon_cctv: >
                <svg viewBox="0 0 24 24"><path d="m 18.251695,4.6349153 c -0.38,-0.03 -0.78,0.06 -1.15,0.26 l -8.6500001,5 c -0.96,0.5599997 -1.28,1.7999997 -0.73,2.7399997 l 1.5,2.59 c 0.55,0.97 1.7700001,1.29 2.7300001,0.74 l 1.8,-1.04 c 0.27,0.46 0.67,0.83 1.16,1.04 v 1.77 c 0,1.09 0.89,1.96 2,1.96 h 5.19 v -1.96 h -5.19 v -1.77 c 0.91,-0.4 1.5,-1.3 1.5,-2.27 0,-0.46 -0.12,-0.89 -0.34,-1.27 l 2.53,-1.46 c 0.97,-0.56 1.3,-1.7699997 0.74,-2.7399997 l -1.5,-2.59 c -0.34,-0.6 -0.95,-0.94 -1.59,-1 m -11.9300001,8.2299997 -4.22,0.7 0.75,1.3 2,3.46 0.75,1.3 2.72,-3.3 z" fill="var(--button-card-light-color-no-temperature)"/></svg>
            styles:
              custom_fields:
                icon_cctv:
                  [top: 11%, left: 6%, width: 3vw, position: absolute]
            template: sensors



          - type: custom:button-card
            entity: camera.ezviz03
            name: 门厅摄像机
            style:
              top: 82.1%
              left: 66.14%
              width: 10%
            custom_fields:
              icon_cctv: >
                <svg viewBox="0 0 24 24"><path d="M12,2A7,7 0 0,1 19,9A7,7 0 0,1 12,16A7,7 0 0,1 5,9A7,7 0 0,1 12,2M12,4A5,5 0 0,0 7,9A5,5 0 0,0 12,14A5,5 0 0,0 17,9A5,5 0 0,0 12,4M12,6A3,3 0 0,1 15,9A3,3 0 0,1 12,12A3,3 0 0,1 9,9A3,3 0 0,1 12,6M6,22A2,2 0 0,1 4,20C4,19.62 4.1,19.27 4.29,18.97L6.11,15.81C7.69,17.17 9.75,18 12,18C14.25,18 16.31,17.17 17.89,15.81L19.71,18.97C19.9,19.27 20,19.62 20,20A2,2 0 0,1 18,22H6Z" fill="var(--button-card-light-color-no-temperature)"/></svg>
            styles:
              custom_fields:
                icon_cctv:
                  [top: 11%, left: 6%, width: 3vw, position: absolute]
            template: sensors

          ##########################################################################
          #                                                                        #
          #                               * 区域六 *                                #
          #                                                                        #
          ##########################################################################

          - prefix: 成员
            <<: *title
            style:
              top: 53.4%
              left: 75.1%
              <<: *title-style

          - type: custom:button-card
            entity: person.baba
            name: 我
            triggers_update:
              ['person.baba', 'sensor.baba_iphone7p_battery_level']
#            state_display: &button_home_state_display >
#              [[[ return entity.state === 'home' ? '在家' : '外出'; ]]]
            show_entity_picture: true
            state: &button_home_state
              - value: 'home'
                styles:
                  card:
                    - background-color: rgba(255, 255, 255, 0.8)
                  name:
                    - color: rgba(0, 0, 0, 0.6)
                  state:
                    - color: rgba(0, 0, 0, 0.6)
                  custom_fields:
                    info:
                      - color: '#959698'
            styles: &button_home_styles
              entity_picture:
                  [clip-path: circle(50% at center), top: 7.5%, left: 11.2%, width: 3vw, position: absolute]
              custom_fields:
                sensor: *circle_pos
            style:
              top: 64.5%
              left: 80.05%
              width: 10%
            tap_action: !include popup/hemma_mattias.yaml
            hold_action: !include popup/hemma_mattias.yaml
            custom_fields:
              sensor: >
                [[[ const last_changed = states['sensor.baba_iphone7p_battery_level'].state; 
                const stroke_color = entity.state === 'home' ? '#b2b2b2' : '#313638'; 
                const fill_color = entity.state === 'home' ? 'none' : '#FFFFFF08';
                return `<svg viewBox="0 0 50 50"><circle cx="25" cy="25" r="20.5" stroke="${stroke_color}" stroke-width="1.5" fill="${fill_color}" />
                <text x="50%" y="54%" fill="#8d8e90" font-size="14" text-anchor="middle" alignment-baseline="middle">${last_changed}%</text></svg>`; ]]]
            template: switch

          - type: custom:button-card
            entity: person.mama
            name: 老婆
            triggers_update:
              ['person.mama', 'sensor.mama_iphone_battery_state_2']
#            state_display: *button_home_state_display
            show_entity_picture: true
            state: *button_home_state
            styles: *button_home_styles
            style:
              top: 64.5%
              left: 91.05%
              width: 10%
            tap_action: !include popup/hemma_sanja.yaml
            hold_action: !include popup/hemma_sanja.yaml
            custom_fields:
              sensor: >
                [[[ const last_changed = states['sensor.mama_iphone_battery_state_2'].state; 
                const stroke_color = entity.state === 'home' ? '#b2b2b2' : '#313638'; 
                const fill_color = entity.state === 'home' ? 'none' : '#FFFFFF08';
                return `<svg viewBox="0 0 50 50"><circle cx="25" cy="25" r="20.5" stroke="${stroke_color}" stroke-width="1.5" fill="${fill_color}" />
                <text x="50%" y="54%" fill="#8d8e90" font-size="14" text-anchor="middle" alignment-baseline="middle">${last_changed}%</text></svg>`; ]]]
            template: switch


          - type: custom:button-card
            entity: person.erzi
            name: 儿子
#            triggers_update:
#              ['person.erzi', 'sensor.sanja_last_changed']
#            state_display: *button_home_state_display
            show_entity_picture: true
            state: *button_home_state
            styles: *button_home_styles
            style:
              top: 82.1%
              left: 80.05%
              width: 10%
            tap_action: !include popup/hemma_sanja.yaml
            hold_action: !include popup/hemma_sanja.yaml
            custom_fields:
              sensor: >
                [[[ const last_changed = states['sensor.mama_iphone_battery_state_2'].state; 
                const stroke_color = entity.state === 'home' ? '#b2b2b2' : '#313638'; 
                const fill_color = entity.state === 'home' ? 'none' : '#FFFFFF08';
                return `<svg viewBox="0 0 50 50"><circle cx="25" cy="25" r="20.5" stroke="${stroke_color}" stroke-width="1.5" fill="${fill_color}" />
                <text x="50%" y="54%" fill="#8d8e90" font-size="14" text-anchor="middle" alignment-baseline="middle">${last_changed}%</text></svg>`; ]]]
            template: switch


          - type: custom:button-card
            entity: person.car
            name: 车
            triggers_update:
              ['person.car', 'sensor.traccar_car_speed']
#            state_display: *button_home_state_display
            show_entity_picture: true
            state: *button_home_state
            styles: *button_home_styles
            style:
              top: 82.1%
              left: 91.05%
              width: 10%
            tap_action: !include popup/hemma_sanja.yaml
            hold_action: !include popup/hemma_sanja.yaml
            custom_fields:
              sensor: >
                [[[ const last_changed = states['sensor.traccar_car_speed'].state; 
                const stroke_color = entity.state === 'home' ? '#b2b2b2' : '#313638'; 
                const fill_color = entity.state === 'home' ? 'none' : '#FFFFFF08';
                return `<svg viewBox="0 0 50 50"><circle cx="25" cy="25" r="20.5" stroke="${stroke_color}" stroke-width="1.5" fill="${fill_color}" />
                <text x="50%" y="54%" fill="#8d8e90" font-size="14" text-anchor="middle" alignment-baseline="middle">${last_changed}%</text></svg>`; ]]]
            template: switch

  - panel: true
    path: default_view2
    title: 休息区
    cards:
      - type: picture-elements
        image: /local/images/Wallpapers/bg_pixelc.png
        style:
          .: |
            /* Global */

            #root > hui-icon-element {color: rgba(255, 255, 255, 0.1) !important; transition: 0.4s;}
            #root > hui-icon-element:hover {color: rgba(255, 255, 255, 0.25) !important; transition: none;}
            #root > hui-icon-element:active {color: rgba(255, 255, 255, 0.35) !important; transition: none;}
          "#root > hui-image":
            $: |
              #image {pointer-events: none;}
          "#root > hui-markdown-card, #root > hui-element > hui-markdown-card":
            $: |
              ha-card > ha-markdown {padding: 0 !important;}
              ha-card > ha-markdown > p > font > ha-icon {vertical-align: 3%; opacity: 0.6;}
              ha-card > ha-markdown > p > span {font-family: SF Text; font-size: 5vw; 
              font-weight: 200; margin-left: -0.3vw; letter-spacing: -0.05vw;}
          "#root > hui-state-label-element":
            $: |
              div {padding: 0 !important;}
          "#root > hui-conditional-element:nth-child(11) > button-card":
            $: |
              #card { background-color: #202a2f90; }
              #card:hover, #card:active { filter: brightness(140%); transition: none; }
        elements:
          #################################################
          #                                               #
          #                     * 底栏 *                  #
          #                                               #
          #################################################
          - type: custom:hui-markdown-card
            style:
              top: 93.5%
              left: 70.2%
              width: 90vw
              height: 1px
              --mdc-icon-size: 1.2vw
              --ha-card-background: none
              --ha-card-box-shadow: none
              --primary-text-color: '#6a7377'
              font-family: SF Display
              font-size: 1.15vw
              font-weight: 400
              letter-spacing: 0.06vw
              line-height: 2.05vw
              opacity: 0.5
            content: >
              {% if is_state('sensor.china_coronavirus_current', 
              'unavailable') %} {% else %}
              <font color='#6a7377'>
              <ha-icon icon="custom:corona-virus"></ha-icon> <b>COVID-19</b>
              ‍  ‍  ‍   ‍  ‍  ‍ <font color='#2f3436'>|‍</font>  ‍  ‍  ‍   ‍  ‍  ‍ 
              <ha-icon icon="mdi:emoticon-sad"></ha-icon> 现存:
              <b>{{ states('sensor.china_coronavirus_current') }}</b> 人
              ‍  ‍  ‍   ‍  ‍  ‍ <font color='#2f3436'>|‍</font>  ‍  ‍  ‍   ‍  ‍  ‍ 
              <ha-icon icon="mdi:emoticon-happy"></ha-icon> 治愈:
              <b>{{ states('sensor.china_coronavirus_recovered') }}</b> 人
              ‍  ‍  ‍   ‍  ‍  ‍ <font color='#2f3436'>|‍</font>  ‍  ‍  ‍   ‍  ‍  ‍ 
              <ha-icon icon="mdi:chart-bar"></ha-icon> 累计:
              <b>{{ states('sensor.china_coronavirus_confirmed') }}</b> 人
              ‍  ‍  ‍   ‍  ‍  ‍ <font color='#2f3436'>|‍</font>  ‍  ‍  ‍   ‍  ‍  ‍ 
              <ha-icon icon="mdi:grave-stone"></ha-icon> 死亡:
              <b>{{ states('sensor.china_coronavirus_deaths') }}</b> 人
              </font>
              {% endif %}
          ##########################################################################
          #                                                                        #
          #                              * 边栏 *                                  #
          #                                                                        #
          ##########################################################################
          - type: image
            image: /local/images/Wallpapers/sidebar_pixel.png
            tap_action:
              action: none
            hold_action:
              action: none
            style:
              top: 50%
              left: 10.6%
              width: 21.5%
              pointer-events: none
              border-right: 1.5px solid rgba(58,69,73,0.2)
          #################################################
          #                                               #
          #                   侧栏信息                     #
          #                                               #
          #################################################
          - type: custom:hui-element
            card_type: markdown
            style:
              {top: 8%, left: 11.1%, width: 15.5vw, height: 1px, --ha-card-background: none, --ha-card-box-shadow: none, 
              --primary-text-color: 'rgba(255, 255, 255, 0.9)', font-family: SF Display, font-size: 4.5vw, font-weight: 300, 
              letter-spacing: 0.06vw, line-height: 2.05vw, opacity: 0.75}
            content: >
              <span>{{ states('sensor.time' ) }}</span>

          - type: custom:hui-element
            card_type: markdown
            style:
              {top: 15%, left: 11.1%, width: 15.5vw, height: 1px, --ha-card-background: none, --ha-card-box-shadow: none, 
              --primary-text-color: 'rgba(255, 255, 255, 0.9)', font-family: SF Display, font-size: 1.5vw, font-weight: 300, 
              letter-spacing: 0.06vw, line-height: 2.05vw, opacity: 0.75}
            content: >
              <span>{{ states('sensor.date' ) }}</span>


              <font color='#6a7377'><b>{{ states('sensor.jieqi_cnday') }}</b><br>
              <b>{{ states('sensor.jieqi_week') }}</b> </font><br> 

              <b>{{ states('sensor.greeting') }}</b>


              ☀   <b>天气预报</b>   🌦 

              <font color='#6a7377'>

              实时：<b>{{ states('sensor.caiyun_hourly_skycon') }}</b>

              明日：<b>{{ states('sensor.caiyun_day1_skycon') }}</b>

              后日：<b>{{ states('sensor.caiyun_day2_skycon') }}</b>

              <font color='#F5F5F5'>

              预警：{{ states('sensor.caiyun_minutely_description') }}


          - type: custom:hui-element
            card_type: markdown
            style:
              {top: 68%, left: 11.1%, width: 15.5vw, height: 1px, --ha-card-background: none, --ha-card-box-shadow: none, 
              --primary-text-color: 'rgba(255, 255, 255, 0.9)', font-family: SF Display, font-size: 1.2vw, font-weight: 300, 
              letter-spacing: 0.06vw, line-height: 2.05vw, opacity: 0.75}
            content: >
              {{'\u26A0\uFE0F'}} 服务器风扇转速：<b>{{ states('sensor.hp_ilo_cpu_fanspeed') }}%</b>


              {% if is_state('sensor.plex_gen8_plex', '0') %}
              {{'\u26A0\uFE0F'}} Plex无用户连接 {% endif %}


              {% if is_state('binary_sensor.door_window_sensor_158d0002014310', 'on') %}
              {{'\u26A0\uFE0F'}} 入户大门开启中 {% endif %}
              </font>


              {% if is_state('group.all_motion_sensors', 'on') %}
              {{'\u26A0\uFE0F'}} 家里目前有人晃悠 {% endif %}
              </font>



          #################################################
          #                                               #
          #                  底部按钮                      #
          #                                               #
          #################################################

          - type: icon
            icon: mdi:sofa
            title: 活动区
            style:
              top: 87.41%
              left: 2.8%
              color: rgba(255, 255, 255, 0.10)
              padding: 0.8vw
              --mdc-icon-size: 3vw
            tap_action: #!include popup/sidebar_vacuum.yaml
              action: navigate
              navigation_path: /lovelace-matt8707/default_view

          - type: icon
            icon: mdi:bed-king-outline 
            title: 休息区
            style:
              top: 87.41%
              left: 7.8%
              color: rgba(255, 255, 255, 0.10)
              padding: 0.8vw
              --mdc-icon-size: 3vw
            tap_action: #!include popup/sidebar_vacuum.yaml
              action: navigate
              navigation_path: /lovelace-matt8707/default_view2

          - type: icon
            icon: mdi:toilet
            title: 厨卫区
            style:
              top: 87.41%
              left: 13.1%
              color: rgba(255, 255, 255, 0.10)
              padding: 0.8vw
              --mdc-icon-size: 3vw
            tap_action: #!include popup/sidebar_scenarier.yaml
              action: navigate
              navigation_path: /lovelace-matt8707/default_view3

          - type: icon
            icon: mdi:hammer-wrench #memory 
            title: 系统信息
            style:
              top: 87.55%
              left: 18.2%
              color: rgba(255, 255, 255, 0.10)
              padding: 0.8vw
              --mdc-icon-size: 3vw
            tap_action: #!include popup/sidebar_information.yaml
              action: navigate
              navigation_path: /lovelace-matt8707/default_view4
          #################################################
          #                                               #
          #                      角标信息                  #
          #                                               #
          #################################################

          - type: conditional
            conditions:
              - entity: sensor.hass_version_template
                state_not: Senaste
              - entity: sensor.hass_version_template
                state_not: unknown
            elements:
              - type: image
                image: "data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 50 50'%3E%3Ccircle cx='25' cy='25' r='20.3' fill='%23ac2e2e' /%3E%3Cpath d='M24.4 18.3h0L19 21.9v-3.4l5.3-3.7H28v20.4h-3.6V18.3z' fill='%23bcbebf' /%3E%3C/svg%3E"
                style:
                  top: 85%
                  left: 12.2%
                  width: 1.7%
                  pointer-events: none

          #################################################
          #                                               #
          #                     信息提醒1                  #
          #                                               #
          #################################################

          - type: conditional
            conditions:
              - entity: input_boolean.krisinformation_visibility
                state: 'on'
            elements:
              - type: custom:stack-in-card
                style:
                  --ha-card-background: '#5a1f1f'
                  --ha-card-box-shadow: none
                  filter: 'drop-shadow(0 0 1vw #1e1e1e)'
                  --primary-text-color: rgba(255, 255, 255, 0.9)
                  font-family: SF Display
                  font-size: 1.3vw
                  font-weight: 300
                  height: 1px
                  max-height: 4vw
                  left: 10.7%
                  letter-spacing: 0.06vw
                  line-height: 1.7vw
                  max-width: 17vw
                  position: absolute
                  top: 18%
                  width: 17.5vw
                  hyphens: auto
                  z-index: 10
                  --ha-card-border-radius: 0.7vw
                  --ha-card-border: '0.1vw solid #292c2e'
                cards:
                - type: custom:hui-element
                  card_type: markdown
                  style: "ha-card {padding: 0.4vw;}"
                  content: >
                    {% if is_state_attr('sensor.krisinformation_sverige', 'messages', []) %}
                    {% else %}
                      {{'\u26A0\uFE0F'}} <b>Krisinformation</b><br>
                      {{ as_timestamp(state_attr('sensor.krisinformation_sverige', 
                      'messages')[0]["Published"]) | timestamp_custom('%Y-%m-%d') }}<br>
                      {{ state_attr('sensor.krisinformation_sverige', 
                      'messages')[0]["Message"] | truncate(280, True, '...', 0) }}
                    {% endif %}
                - type: custom:button-card
                  show_label: true
                  label: OK
                  tap_action:
                    action: call-service
                    service: input_boolean.turn_off
                    service_data:
                      entity_id: input_boolean.krisinformation_visibility
                  styles:
                    label:
                      [font-size: 1.5vw, background: '#FFFFFF15', border-radius: 0.6vw, font-weight: 500, 
                      letter-spacing: 0.09vw, opacity: 0.65, padding: 0.7vw 1vw 0.8vw 1vw, font-family: SF Display]
                    card:
                      [width: 4.5vw, height: 5vw, margin-top: -0.5vw, padding-bottom: 1vw, margin-left: 138%]

          #################################################
          #                                               #
          #                 信息提醒2                      #
          #                                               #
          #################################################

          - type: conditional
            conditions:
              - entity: input_boolean.laundry_timer_visibility
                state: 'on'
            elements:
              - type: custom:button-card
                entity: timer.laundry
                show_icon: false
                show_name: false
                show_state: true
                tap_action:
                  services: |
                    [[[ hass.callService('timer', 'cancel', {entity_id: 'timer.laundry'});
                    hass.callService('timer', 'start', {entity_id: 'timer.laundry'}); ]]]
                hold_action:
                  services: |
                    [[[ hass.callService('timer', 'cancel', {entity_id: 'timer.laundry'});
                    hass.callService('input_boolean', 'turn_off', {entity_id: 'input_boolean.laundry_timer_visibility'}); ]]]
                styles:
                  card:
                    [background: '#202a2f30', border-radius: 0.7vw, box-shadow: none, border: '0.1vw solid #292c2e']
                  state:
                    [font-size: 2.5vw, font-weight: 500, letter-spacing: 0.09vw, opacity: 0.65, padding: 0.5vw 1vw 0.5vw 1vw]
                style:
                  top: 78%
                  left: 10.8%
                  font-size: 1.6vw

          #################################################
          #                                               #
          #                     信息提醒3                  #
          #                                               #
          #################################################
          - type: conditional
            conditions:
              - entity: sensor.hacs
                state_not: '0'
              - entity: sensor.hacs
                state_not: unknown
            elements:
              - type: custom:button-card
                style:
                  top: 95%
                  left: 10.45%
                name: >
                  [[[ if (parseInt(states['sensor.hacs'].state) === 1) {
                  return states['sensor.hacs'].state + '个HACS插件可更新!'; }
                  else { return states['sensor.hacs'].state + '个HACS插件有更新!'; } ]]]
                styles:
                  name:
                    [letter-spacing: 0.06vw, font-family: SF Display, font-weight: 500, 
                    font-size: 1.15vw, color: '#6a7377', padding: 0.4vw 1.2vw 0.4vw 1.2vw]
                  card:
                    [background: '#202a2f90', border-radius: 0.7vw, opacity: 0.5]
                tap_action:
                  action: call-service
                  service: browser_mod.popup
                  service_data:
                    title: 关闭
                    deviceID: this
                    style:
                      background: none
                      box-shadow: none
                      width: 75em
                    card:
                      type: custom:hui-element
                      card_type: iframe
                      url: !secret hacs_url
                      aspect_ratio: 60%
                      style: 'ha-card { border-radius: 1em;}'

#          - prefix: 顶端标题待设置
#            <<: *title
#            style:
#              top: 4.15%
#              left: 50.2%
#              <<: *title-style-header

          ##########################################################################
          #                                                                        #
          #                                   区域一                                #
          #                                                                        #
          ##########################################################################

          - prefix: 主卧设备
            <<: *title
            style:
              top: 9.15%
              left: 25.4%
              <<: *title-style

          - type: custom:button-card
            entity: light.woshi_xdd
            name: 主卧吸顶灯
            style:
              top: 20.35%
              left: 30.31%
              width: 10%
            #  filter: drop-shadow(0 0 0.75rem WhiteSmoke)
            custom_fields:
              icon_ceiling_light: *icon_ceiling_light
            styles: *icon_ceiling_light_styles
            template: switch

          - type: custom:button-card
            entity: light.sonoff01
            name: 主卧落地灯
            style:
              top: 37.9%
              left: 30.31%
              width: 10%
            custom_fields:
              icon_shade: >
                [[[ const state = entity.state === 'on' ? 'animate' : null;
                return `<svg viewBox="0 0 50 50"><style>@keyframes animate{0%{transform: scale(0.85);}20%{transform: scale(1.1);}40%{transform: scale(0.95);}60%{transform: scale(1.03);}80%{transform: scale(0.97);}100%{transform: scale(1);}}.animate{animation: animate 0.8s; transform-origin: center;}</style>
                <path fill="#9da0a2" d="M26.4 25.6c.6-.3 1.1-.7 1.1-1.3L25 17.9l-2.5 6.4c0 .7.6 1.1 1.1 1.3v20.8h-5.5v2.7h13.7v-2.7h-5.5V25.6z"/>
                <path class="${state}" fill="var(--button-card-light-color-no-temperature)" d="M24.6.9l-9.4.5c-.6.1-1.9 0-2.5 2.1s-2.4 9.1-4 16.9c-.2.7-.5 2-.5 2.3s-.4 1.6.9 1.6c.8.1 7.4.3 15.9.3 8.6 0 15.1-.3 15.9-.3 1.3-.1.9-1.3.9-1.6s-.3-1.6-.5-2.3c-1.6-7.8-3.4-14.8-4-16.9s-1.9-2-2.5-2.1c-1.6-.2-6.9-.4-9.4-.5"/> </svg>`;]]]
            styles:
              custom_fields:
                icon_shade:
                  [top: 11%, left: 4.6%, width: 3.05vw, position: absolute]
            template: switch

          - type: custom:button-card
            entity: cover.bedroom
            name: 主卧窗帘
            style:
              top: 37.9%
              left: 41.31%
              width: 10%
            #  filter: drop-shadow(0 0 0.75rem WhiteSmoke)
            tap_action:
              action: toggle
          #  hold_action: !include popup/sovrum_flakt.yaml
            custom_fields:
              icon_cover: *icon_cover
            styles: *icon_cover_styles 
            template: cover

          ##########################################################################
          #                                                                        #
          #                               * 区域二 *                               #
          #                                                                        #
          ##########################################################################

          - prefix: 次卧灯
            <<: *title
            style:
              top: 9.15%
              left: 50.2%
              <<: *title-style

          - type: custom:button-card
            entity: light.shufang_xdd
            name: 次卧吸顶灯
            style:
              top: 20.35%
              left: 55.18%
              width: 10%
            custom_fields:
              icon_ceiling_light: *icon_ceiling_light
            styles: *icon_ceiling_light_styles
            template: switch

          - type: custom:button-card
            entity: switch.slot_0301
            name: 次卧台灯
            style:
              top: 20.35%
              left: 66.14%
              width: 10%
            custom_fields:
              icon_light_lamp: &icon_light_lamp >
                [[[ if (entity.state === 'on') return '<svg id="epn96qwrxk61"
                xmlns="http://www.w3.org/2000/svg"
                xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 24 24"
                shape-rendering="geometricPrecision"
                text-rendering="geometricPrecision"><style><![CDATA[#epn96qwrxk64 {
                animation-name: epn96qwrxk64__tt, epn96qwrxk64_c_o; animation-duration:
                3000ms; animation-fill-mode: forwards; animation-timing-function:
                linear; animation-direction: normal; animation-iteration-count: 1;  
                }@keyframes epn96qwrxk64__tt { 0% {transform: translate(0px,0px)
                translate(0px,0px)} 16.666667% {transform: translate(0px,0px)
                translate(0.500000px,0.500000px)} 33.333333% {transform:
                translate(0px,0px) translate(0px,0px)} 100% {transform:
                translate(0px,0px) translate(0px,0px)} }@keyframes epn96qwrxk64_c_o { 0%
                {opacity: 0} 33.333333% {opacity: 1} 100% {opacity: 1} }]]></style><g
                id="epn96qwrxk62"><path id="epn96qwrxk63"
                d="M14.200000,13.100000L17.900000,10.600000L24,18.400000L32.500000,9.900000L22.900000,2.500000C21.100000,1.100000,18.500000,1.300000,16.900000,2.900000C15.500000,4.300000,15.200000,6.500000,16.100000,8.200000L12.500000,10.700000C7.100000,14.400000,4.600000,21,6.100000,27.300000C5.100000,28,4.500000,29.200000,4.500000,30.500000L3.600000,30.500000C3,30.500000,2.500000,31,2.500000,31.600000L2.500000,33.500000L19.500000,33.500000L19.500000,31.600000C19.500000,31,19,30.500000,18.400000,30.500000L17.500000,30.500000L17.500000,29.500000C17.500000,28.900000,17.100000,28.500000,16.500000,28.500000C15.900000,28.500000,15.500000,28.900000,15.500000,29.500000L15.500000,30.500000L12.500000,30.500000C12.500000,28.500000,11,26.800000,9.100000,26.600000C7.800000,21.500000,9.800000,16.100000,14.200000,13.100000Z"
                transform="matrix(0.64698941360264 0 0 0.64698941360264 0.67768526000000
                0.65705442500000)" fill="rgb(87,168,215)" stroke="none"
                stroke-width="1"/></g><g id="epn96qwrxk64" transform="translate(0,0)
                translate(0,0)" opacity="0"><path id="epn96qwrxk65"
                d="M27.200000,18C28.500000,18.400000,30,18,31.100000,17C32.100000,16,32.500000,14.500000,32.100000,13.100000L27.200000,18Z"
                transform="matrix(1 0 0 1 -9.79945100000000 -4.98629300000000)"
                fill="rgb(248,205,65)" stroke="none" stroke-width="1"/></g></svg> ';  
                else return '<svg id="egc1unvcnm5e1" xmlns="http://www.w3.org/2000/svg"
                xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 24 24"
                shape-rendering="geometricPrecision"
                text-rendering="geometricPrecision"><g id="egc1unvcnm5e2"><path
                id="egc1unvcnm5e3"
                d="M14.200000,13.100000L17.900000,10.600000L24,18.400000L32.500000,9.900000L22.900000,2.500000C21.100000,1.100000,18.500000,1.300000,16.900000,2.900000C15.500000,4.300000,15.200000,6.500000,16.100000,8.200000L12.500000,10.700000C7.100000,14.400000,4.600000,21,6.100000,27.300000C5.100000,28,4.500000,29.200000,4.500000,30.500000L3.600000,30.500000C3,30.500000,2.500000,31,2.500000,31.600000L2.500000,33.500000L19.500000,33.500000L19.500000,31.600000C19.500000,31,19,30.500000,18.400000,30.500000L17.500000,30.500000L17.500000,29.500000C17.500000,28.900000,17.100000,28.500000,16.500000,28.500000C15.900000,28.500000,15.500000,28.900000,15.500000,29.500000L15.500000,30.500000L12.500000,30.500000C12.500000,28.500000,11,26.800000,9.100000,26.600000C7.800000,21.500000,9.800000,16.100000,14.200000,13.100000Z"
                transform="matrix(0.64698941360264 0 0 0.64698941360264 0.67768526000000
                0.65705442500000)" fill="rgb(95,98,103)" stroke="none"
                stroke-width="1"/></g><g id="egc1unvcnm5e4" opacity="0.5"><path
                id="egc1unvcnm5e5"
                d="M27.200000,18C28.500000,18.400000,30,18,31.100000,17C32.100000,16,32.500000,14.500000,32.100000,13.100000L27.200000,18Z"
                transform="matrix(1 0 0 1 -9.79945100000000 -4.98629300000000)"
                fill="rgb(158,160,162)" stroke="none" stroke-width="1"/></g></svg>'; ]]]
            styles: 
              custom_fields:
                icon_light_lamp: &icon_light_lamp_styles
                  [top: 11.5%, left: 8%, width: 2.7vw, position: absolute]
            template: switch

          - type: custom:button-card
            entity: light.studyroom_led
            name: 次卧灯带
            style:
              top: 37.9%
              left: 55.18%
              width: 10%
            #  filter: drop-shadow(0 0 0.25rem WhiteSmoke)
            custom_fields:
              icon_light_belt: *icon_light_belt
            styles: *icon_light_belt_styles
            template: light

          - type: custom:button-card
            entity: light.studyroom_lamp
            name: 次卧阅读灯
            style:
              top: 37.9%
              left: 66.14%
              width: 10%
#            tap_action:
#              action: toggle
            custom_fields:
              icon_lamp2: &icon_lamp2 >
                [[[ const state = entity.state === 'on' ? 'animate' : null; 
                return `<svg viewBox="0 0 50 50"><style>@keyframes animate{0%{transform: scale(0.85);}20%{transform: scale(1.1);}40%{transform: scale(0.95);}60%{transform: scale(1.03);}80%{transform: scale(0.97);}}.animate{animation: animate 0.8s; transform-origin: center;}</style>
                <path fill="#9da0a2" d="M26.5 21.8l3.8-6.1H19.7l3.8 6.1c-5 .7-6.3 5.8-5.7 10.2.7 5.1 3.2 10.1 5.7 14.4H19v2.5h11.8v-2.5h-4.5C29 42 31.4 37 32.1 32c.6-4.4-.6-9.4-5.6-10.2zm3.1 9.1c-.3 4.3-2.3 8.7-4.4 12.4l-.2.1v.1-.1c-1.8-3-3.3-6.4-4.1-9.7-.7-3.1-1-7.2 2.7-8.4 1.4-.5 3.1-.1 4.2.8 1.6 1 1.8 3 1.8 4.8z"/>
                <path class="${state}" fill="var(--button-card-light-color-no-temperature)" d="M38.1 20L35.7 3.8c-.3-1.9-.4-1.7-.6-2-.9-.6-2.3-.7-2.3-.7H17.4s-1.4 0-2.3.7c-.2.3-.3.1-.6 2C14 5.7 11.9 20 11.9 20s5.8.3 13.4.3h0c7.3 0 12.8-.3 12.8-.3z"/> </svg>`;]]]
            styles: &icon_lamp2_styles
              custom_fields:
                icon_lamp2:
                  [top: 11%, left: 4.5%, width: 3.05vw, position: absolute]
            template: light

          ##########################################################################
          #                                                                        #
          #                               * 区域三 *                               #
          #                                                                        #
          ##########################################################################

          - prefix: 空调风扇
            <<: *title
            style:
              top: 9.15%
              left: 75.1%
              <<: *title-style

          - type: custom:button-card
            entity: climate.all_home_climate
            name: 空调群组
            style:
              top: 20.35%
              left: 80.05%
              width: 10%
            custom_fields:
              icon_climate: *icon_climate
            styles: *icon_climate_styles
            template: climate

          - type: custom:button-card
            entity: fan.sonoff06
            name: 次卧风扇
            style:
              top: 20.35%
              left: 91.05%
              width: 10%
            tap_action:
              action: toggle
            hold_action: !include popup/sovrum_flakt.yaml
            custom_fields:
              icon_fan: *icon_fan
            styles: *icon_fan_styles
            template: switch

          - type: custom:button-card
            entity: climate.bedroom_acpartner
            name: 主卧空调
            style:
              top: 37.9%
              left: 80.05%
              width: 10%
            tap_action:
              action: more-info
          #  hold_action: !include popup/studio_monitorer.yaml
            custom_fields:
              icon_climate: *icon_climate
            styles: *icon_climate_styles
            template: climate

          - type: custom:button-card
            entity: climate.studyroom_acpartner
            name: 次卧空调
            style:
              top: 37.9%
              left: 91.05%
              width: 10%
            tap_action:
              action: more-info
          #  hold_action: !include popup/studio_monitorer.yaml
            custom_fields:
              icon_climate: *icon_climate
            styles: *icon_climate_styles
            template: climate

 
          - prefix: 设备电源
            <<: *title
            style:
              top: 53.4%
              left: 25.4%
              <<: *title-style

          - type: custom:button-card
            entity: light.woshi_xdd
            name: 主卧插排
            style:
              top: 64.5%
              left: 30.31%
              width: 10%
            #  filter: drop-shadow(0 0 0.75rem WhiteSmoke)
            custom_fields:
              icon_power_switch: &icon_power_switch >
                [[[ if (entity.state === 'on') return '<svg id="el0k5alfrd2e1"
                xmlns="http://www.w3.org/2000/svg"
                xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 20 20"
                shape-rendering="geometricPrecision"
                text-rendering="geometricPrecision"><style><![CDATA[#el0k5alfrd2e3
                {animation: el0k5alfrd2e3_c_o 1000ms linear infinite normal
                forwards}@keyframes el0k5alfrd2e3_c_o { 0% {opacity: 0.500000} 50%
                {opacity: 1} 100% {opacity: 0.500000} }]]></style><path
                id="el0k5alfrd2e2"
                d="M2.790000,2.338000L20.923000,2.338000C21.241000,2.338000,21.495000,2.592000,21.495000,2.910000L21.495000,21.107000C21.495000,21.424000,21.241000,21.679000,20.923000,21.679000L2.790000,21.679000C2.472000,21.679000,2.218000,21.424000,2.218000,21.107000L2.218000,2.910000C2.218000,2.592000,2.472000,2.338000,2.790000,2.338000Z"
                fill="rgb(210,210,210)" stroke="none" stroke-width="1"/><path
                id="el0k5alfrd2e3"
                d="M18.392000,18.872000L18.392000,5.881000L18.392000,18.872000ZM11.896000,6.963000C8.913000,6.963000,6.483000,9.394000,6.483000,12.376000C6.483000,15.359000,8.913000,17.790000,11.896000,17.790000C14.879000,17.790000,17.309000,15.359000,17.309000,12.376000C17.309000,9.394000,14.879000,6.963000,11.896000,6.963000ZM11.356000,8.082000L11.356000,10.212000L12.438000,10.212000L12.438000,8.082000C14.578000,8.348000,16.227000,10.163000,16.227000,12.376000C16.227000,14.590000,14.578000,16.405000,12.438000,16.670000L12.438000,14.541000L11.356000,14.541000L11.356000,16.670000C9.214000,16.405000,7.565000,14.590000,7.565000,12.376000C7.565000,10.163000,9.214000,8.348000,11.356000,8.082000ZM9.190000,11.834000L9.190000,12.919000L10.272000,12.919000L10.272000,11.834000L9.190000,11.834000ZM13.521000,11.834000L13.521000,12.919000L14.603000,12.919000L14.603000,11.834000L13.521000,11.834000Z"
                opacity="0.5" fill="rgb(236,84,63)" stroke="none"
                stroke-width="0.529167"/></svg> ';   else return '<svg
                id="eafen1hwgbxn1" xmlns="http://www.w3.org/2000/svg"
                xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 20 20"
                shape-rendering="geometricPrecision"
                text-rendering="geometricPrecision"><style><![CDATA[#eafen1hwgbxn3
                {animation: eafen1hwgbxn3_c_o 1000ms linear 1 normal forwards}@keyframes
                eafen1hwgbxn3_c_o { 0% {opacity: 0.500000} 100% {opacity: 1}
                }]]></style><path id="eafen1hwgbxn2"
                d="M2.790000,2.338000L20.923000,2.338000C21.241000,2.338000,21.495000,2.592000,21.495000,2.910000L21.495000,21.107000C21.495000,21.424000,21.241000,21.679000,20.923000,21.679000L2.790000,21.679000C2.472000,21.679000,2.218000,21.424000,2.218000,21.107000L2.218000,2.910000C2.218000,2.592000,2.472000,2.338000,2.790000,2.338000Z"
                fill="rgb(95,98,103)" stroke="none" stroke-width="1"/><path
                id="eafen1hwgbxn3"
                d="M18.392000,18.872000L18.392000,5.881000L18.392000,18.872000ZM11.896000,6.963000C8.913000,6.963000,6.483000,9.394000,6.483000,12.376000C6.483000,15.359000,8.913000,17.790000,11.896000,17.790000C14.879000,17.790000,17.309000,15.359000,17.309000,12.376000C17.309000,9.394000,14.879000,6.963000,11.896000,6.963000ZM11.356000,8.082000L11.356000,10.212000L12.438000,10.212000L12.438000,8.082000C14.578000,8.348000,16.227000,10.163000,16.227000,12.376000C16.227000,14.590000,14.578000,16.405000,12.438000,16.670000L12.438000,14.541000L11.356000,14.541000L11.356000,16.670000C9.214000,16.405000,7.565000,14.590000,7.565000,12.376000C7.565000,10.163000,9.214000,8.348000,11.356000,8.082000ZM9.190000,11.834000L9.190000,12.919000L10.272000,12.919000L10.272000,11.834000L9.190000,11.834000ZM13.521000,11.834000L13.521000,12.919000L14.603000,12.919000L14.603000,11.834000L13.521000,11.834000Z"
                opacity="0.5" fill="rgb(158,160,162)" stroke="none"
                stroke-width="0.529167"/></svg>'; ]]]
            styles: &icon_power_switch_styles
              custom_fields:
                icon_power_switch:
                  [top: 11%, left: 7%, width: 2.8vw, position: absolute]
                volume: *circle_pos
            template: switch

          - type: custom:button-card
            entity: switch.dc1_num02_s2
            name: 主卧天猫
            style:
              top: 82.1%
              left: 30.31%
              width: 10%
            tap_action:
              action: more-info #toggle
            hold_action: !include popup/studio_monitorer.yaml
            custom_fields:
              icon_monitors: >
                [[[ if (entity.state === 'on') {
                return '<svg viewBox="0 0 50 50"><style>@keyframes animate{35%{transform: scale(0.8); animation-timing-function: cubic-bezier(0, 0.55, 0.45, 1);}36%{transform: translateY(0%);}49%{transform: scale(1.25);}63%{transform: scale(0.85); animation-timing-function: cubic-bezier(0, 0.55, 0.45, 1);}77%{transform: scale(1.15); animation-timing-function: cubic-bezier(0, 0.55, 0.45, 1);}95%{transform: scale(1);}}.animate{animation: animate 1.4s; transform-origin: center;}@keyframes rubber{0%{transform: scale(1);}40%{transform: scale(1);}49%{transform: scale(0.95);}63%{transform: scale(1);}77%{transform: scale(0.95);}100%{transform: scale(1);}}.rubber{animation: rubber 1.3s; transform-origin: center;}</style>
                <g class="rubber"><path fill="#686868" d="M35.8 46.9H14.2c-1.1 0-2-1-2-2.3V6.7c0-1.3.9-2.3 2-2.3h21.5c1.1 0 2 1 2 2.3v37.9c0 1.2-.9 2.3-1.9 2.3z"/><path fill="#2a2a2a" d="M39.2 1H10.8C9.4 1 8.3 2.1 8.2 3.5v42.9a2.65 2.65 0 0 0 2.6 2.6h28.3c1.4 0 2.5-1.2 2.6-2.6V3.5c0-1.4-1.1-2.5-2.5-2.5zM25 7c1.3 0 2.4 1.1 2.4 2.4s-1.1 2.4-2.4 2.4-2.4-1.1-2.4-2.4C22.5 8 23.6 7 25 7zm10.2 35.5l-.4 1.9s-.2.6-.6.6H15.8c-.4 0-.6-.6-.6-.6s-.1-1.1-.4-1.9.6-.9.6-.9h19.3c0-.1.8-.1.5.9z"/> </g> <path class="animate" fill="#e5dd00" d="M25 15.7c-6.2 0-11.3 5.1-11.3 11.3S18.8 38.3 25 38.3 36.3 33.2 36.3 27c-.1-6.3-5.1-11.3-11.3-11.3zm0 14.5a3.33 3.33 0 0 1-3.3-3.3 3.33 3.33 0 0 1 3.3-3.3 3.33 3.33 0 0 1 3.3 3.3c-.1 1.9-1.5 3.3-3.3 3.3z"/></svg>'; }
                else { return '<svg viewBox="0 0 50 50"><path fill="#9da0a2" d="M25 18.6c-4.6 0-8.4 3.8-8.4 8.4s3.8 8.4 8.4 8.4 8.4-3.8 8.4-8.4-3.7-8.4-8.4-8.4zm0 11.7a3.33 3.33 0 0 1-3.3-3.3 3.33 3.33 0 0 1 3.3-3.3 3.33 3.33 0 0 1 3.3 3.3c0 1.8-1.4 3.3-3.3 3.3zM39.2 1H10.9C9.4 1 8.3 2.1 8.3 3.6v42.9a2.65 2.65 0 0 0 2.6 2.6h28.3a2.65 2.65 0 0 0 2.6-2.6v-43C41.7 2 40.5.9 39.2 1zM25 7c1.3 0 2.4 1.1 2.4 2.4s-1.1 2.4-2.4 2.4-2.4-1.1-2.4-2.4S23.7 7 25 7zm10.3 35.5l-.4 1.9s-.2.6-.6.6H15.8c-.4 0-.6-.6-.6-.6l-.4-1.9c-.2-.9.6-.9.6-.9h19.3s.9.1.6.9zM25 38.2c-6.2 0-11.3-5.1-11.3-11.3a11.29 11.29 0 1 1 22.6 0c.1 6.3-5 11.3-11.3 11.3z"/></svg>'; } ]]]
            styles:
              custom_fields:
                icon_monitors:
                  [top: 11%, left: 7%, width: 2.8vw, position: absolute]
                volume: *circle_pos
            template: switch

          - type: custom:button-card
            entity: switch.wol_hzm_pc
            name: 次卧电脑
            style:
              top: 82.1%
              left: 41.31%
              width: 10%
            #  filter: drop-shadow(0 0 0.75rem WhiteSmoke)
            tap_action:
              action: toggle
              animate_locked: |
                [[[ if (states['input_boolean.lock_computer'].state === 'on' && states['input_boolean.dator_template'].state === 'off') {
                this.shadowRoot.getElementById('lock').classList.add('locked');
                window.setTimeout(() => { this.shadowRoot.getElementById('lock').classList.remove('locked'); }, 1100) } ]]]
            hold_action: !include popup/studio_dator.yaml
            custom_fields:
              icon_computer: >
                [[[ const state = entity.state === 'on' ? 'animate' : null; 
                return `<svg viewBox="0 0 50 50"><style>@keyframes animate{from{opacity: 0.5; transform: scale(0.6);}100%{opacity: 1;}}.animate{animation: animate 0.8s cubic-bezier(0.25, 1, 0.5, 1); transform-origin: center;}</style>
                <path class="${state}" d="M31.9 44.5c-1-.3-1.9.4-1.9-3.7h-9.9c0 4.2-.9 3.4-1.9 3.7s-.2.7-.2.7h14.1s.8-.3-.2-.7zM47.6 4.8H2.5c-1.1 0-2 .9-2 2v30.1c0 1.1.9 2 2 2h45c1.1 0 2-.9 2-2v-30a1.95 1.95 0 0 0-1.9-2.1zm-.7 26.4H3.2V7.6H47v23.6z"/></svg>`; ]]]
            #  loading: *loading
              icon_lock: >
                [[[ const state = states['script.auto_stang_allt'].state === 'on' ? 'locked' : null;
                if (states['input_boolean.lock_computer'].state === 'on' && states['input_boolean.dator_template'].state === 'off') {
                return `<svg viewBox="0 0 50 50"><style>@keyframes locked{from, to{transform: translateX(0);}10%, 30%, 50%, 70%, 90%{transform: translateX(-8%);}20%, 40%, 60%, 80%{transform: translateX(8%);}}.locked{animation: locked 1.1s;}</style>
                <path id="lock" class="${state}" d="M8.2 22.6h2.4v-7.2C10.6 7.5 17.1 1 25 1s14.4 6.4 14.4 14.4v7.2h2.4V49H8.2m26.4-26.4v-7.2c0-5.3-4.3-9.6-9.6-9.6s-9.6 4.3-9.6 9.6v7.2"/></svg>`; } ]]]
            styles:
              custom_fields:
                icon_computer:
                  [fill: "[[[ return entity.state === 'on' ? '#72757c' : '#9da0a2'; ]]]", 
                  top: 8.5%, left: 11%, width: 3.3vw, position: absolute]
                icon_lock:
                  [top: 11%, left: 73%, width: 1.7vw, position: absolute, fill: '#b0b3b6']
            template: switch

#          - type: custom:swipe-card
#            start_card: 1
#            parameters:
#              roundLengths: true
#              effect: coverflow
#              speed: 650
#              spaceBetween: 20
#              threshold: 7
#              coverflowEffect:
#                rotate: 80
#                depth: 300
#              pagination:
#                type: 'bullets'
#                dynamicBullets: false
#            style:
#              top: 58.55%
#              left: 35.8%
#              width: 20.97%
#              height: 1px
#              --ha-card-background: none
#              --ha-card-border-radius: .88vw
#              --ha-card-box-shadow: none
#              image-rendering: crisp-edges
#            cards:
#                #################################################
#                #                                               #
#                #                    * 第1页 *                  #
#                #                                               #
#                #################################################
#              - type: picture-elements
#                image: "data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 50 50' /%3E"
#                elements:
#                  - type: custom:button-card
#                    entity: media_player.men_ting_googlehomemini
#                    name: 门厅
#                    custom_fields:
#                      icon: *icon_google_mini
#                    style:
#                      top: 23.9%
#                      left: 23.8%
#                      width: 47.7%
#                    template: media_small
#                  - type: custom:button-card
#                    entity: media_player.ke_ting_googlehomemini
#                    name: 客厅
#                    custom_fields:
#                      icon: *icon_google_mini
#                    style:
#                      top: 23.9%
#                      left: 76.2%
#                      width: 47.7%
#                    template: media_small
#                  - type: custom:button-card
#                    entity: media_player.zhu_wo_googlehomemini
#                    name: 主卧
#                    custom_fields:
#                      icon: *icon_google_mini
#                    style:
#                      top: 76.2%
#                      left: 23.8%
#                      width: 47.7%
#                    template: media_small
#                  - type: custom:button-card
#                    entity: media_player.ci_wo_googlehomemini
#                    name: 次卧
#                    custom_fields:
#                      icon: *icon_google_mini
#                    style:
#                      top: 76.2%
#                      left: 76.2%
#                      width: 47.7%
#                    template: media_small
#                #################################################
#                #                                               #
#                #                    * 第2页 *                  #
#                #                                               #
#                #################################################
#              - type: picture-elements
#                image: "data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 50 50' /%3E"
#                elements:
#                  - type: custom:button-card
#                    entity: media_player.ce_suo_googlehomemini
#                    name: 厕所
#                    custom_fields:
#                      icon: *icon_google_mini
#                    style:
#                      top: 23.9%
#                      left: 23.8%
#                      width: 47.7%
#                    template: media_small


          - prefix: 安防
            <<: *title
            style:
              top: 53.4%
              left: 50.2%
              <<: *title-style

          #################################################
          #                                               #
          #                    区域五                     #
          #                                               #
          #################################################

          - type: custom:button-card
            entity: binary_sensor.door_window_sensor_158d0002014310
            name: 入户门
            style:
              top: 64.5%
              left: 55.18%
              width: 10%
            custom_fields:
              icon_closet: >
                [[[ const state = entity.state === 'on' ? 'door' : 'door reverse'; const opacity = entity.state === 'on' ? 'room' : 'room reverse';
                return `<svg viewBox="0 0 50 50"> <style>.door{animation: door 0.4s cubic-bezier(0.250, 0.460, 0.450, 0.940) both;}.room{animation: room 0.4s cubic-bezier(0.250, 0.460, 0.450, 0.940) both;}.reverse{animation-direction: reverse;}@keyframes door{0%{transform: none; fill: #9da0a2;}100%{transform: skewY(10deg) translate(4.5%, -3.9%) scaleX(0.8); fill: #b68349;}}@keyframes room{0%{opacity: 0;}100%{opacity: 1;}}</style>
                <path class="${opacity}" d="M11.4,1.4h27.2v43.1H11.4V1.4z" fill="#bcbcbc"/><path class="${state}" d="M11.4 1.4v43.1h27.2V1.4H11.4zm23 23.4c0 1.1-.9 1.9-1.9 1.9h0c-1.1 0-1.9-.9-1.9-1.9V21c0-1.1.9-1.9 1.9-1.9h0c1.1 0 1.9.9 1.9 1.9v3.8z"/></svg>`; ]]]
            styles:
              custom_fields:
                icon_closet:
                  [top: 11%, left: 4.1%, width: 3.2vw, position: absolute]
            template: sensors

          - type: custom:button-card
            entity: alarm_control_panel.home_alarm
            name: 安防系统
            style:
              top: 64.5%
              left: 66.14%
              width: 10%
            custom_fields:
              icon_motion: >
                <svg viewBox="0 0 25 25"><path d="M11,13H13V16H16V11H18L12,6L6,11H8V16H11V13M12,1L21,5V11C21,16.55 17.16,21.74 12,23C6.84,21.74 3,16.55 3,11V5L12,1Z" fill="var(--button-card-light-color-no-temperature)"/></svg>
            styles:
              custom_fields:
                icon_motion:
                  [top: 11%, left: 4.1%, width: 3.2vw, position: absolute]
            template: sensors

          - type: custom:button-card
            entity: camera.hikvisioncam
            name: 次卧
            style:
              top: 82.1%
              left: 55.18%
              width: 10%
            custom_fields:
              icon_cctv: >
                <svg viewBox="0 0 24 24"><path d="M12,2A7,7 0 0,1 19,9A7,7 0 0,1 12,16A7,7 0 0,1 5,9A7,7 0 0,1 12,2M12,4A5,5 0 0,0 7,9A5,5 0 0,0 12,14A5,5 0 0,0 17,9A5,5 0 0,0 12,4M12,6A3,3 0 0,1 15,9A3,3 0 0,1 12,12A3,3 0 0,1 9,9A3,3 0 0,1 12,6M6,22A2,2 0 0,1 4,20C4,19.62 4.1,19.27 4.29,18.97L6.11,15.81C7.69,17.17 9.75,18 12,18C14.25,18 16.31,17.17 17.89,15.81L19.71,18.97C19.9,19.27 20,19.62 20,20A2,2 0 0,1 18,22H6Z" fill="var(--button-card-light-color-no-temperature)"/></svg>
            styles:
              custom_fields:
                icon_cctv:
                  [top: 11%, left: 6%, width: 3vw, position: absolute]
            template: sensors

          - type: custom:button-card
            entity: camera.hikvisioncam2
            name: 窗外
            style:
              top: 82.1%
              left: 66.14%
              width: 10%
            custom_fields:
              icon_cctv: >
                <svg viewBox="0 0 24 24"><path d="m 18.251695,4.6349153 c -0.38,-0.03 -0.78,0.06 -1.15,0.26 l -8.6500001,5 c -0.96,0.5599997 -1.28,1.7999997 -0.73,2.7399997 l 1.5,2.59 c 0.55,0.97 1.7700001,1.29 2.7300001,0.74 l 1.8,-1.04 c 0.27,0.46 0.67,0.83 1.16,1.04 v 1.77 c 0,1.09 0.89,1.96 2,1.96 h 5.19 v -1.96 h -5.19 v -1.77 c 0.91,-0.4 1.5,-1.3 1.5,-2.27 0,-0.46 -0.12,-0.89 -0.34,-1.27 l 2.53,-1.46 c 0.97,-0.56 1.3,-1.7699997 0.74,-2.7399997 l -1.5,-2.59 c -0.34,-0.6 -0.95,-0.94 -1.59,-1 m -11.9300001,8.2299997 -4.22,0.7 0.75,1.3 2,3.46 0.75,1.3 2.72,-3.3 z" fill="var(--button-card-light-color-no-temperature)"/></svg>
            styles:
              custom_fields:
                icon_cctv:
                  [top: 11%, left: 6%, width: 3vw, position: absolute]
            template: sensors

          ##########################################################################
          #                                                                        #
          #                               * 区域六 *                                #
          #                                                                        #
          ##########################################################################

          - prefix: 环境温度
            <<: *title
            style:
              top: 53.4%
              left: 75.1%
              <<: *title-style

          - type: custom:button-card
            entity: sensor.temperature_158d00019f912b
            name: 主卧温度
            style:
              top: 64.5%
              left: 80.05%
              width: 10%
            tap_action:
              action: more-info
          #  hold_action: !include popup/studio_monitorer.yaml
            custom_fields:
              icon_temperature: *icon_temperature
            styles: *icon_temperature_styles
            template: sensors

          - type: custom:button-card
            entity: sensor.humidity_158d00019f912b
            name: 主卧湿度
            style:
              top: 64.5%
              left: 91.05%
              width: 10%
            tap_action:
              action: more-info
          #  hold_action: !include popup/studio_monitorer.yaml
            custom_fields:
              icon_humidity: *icon_humidity
            styles: *icon_humidity_styles
            template: sensors

          - type: custom:button-card
            entity: sensor.temperature_158d0001dc17c3
            name: 次卧温度
            style:
              top: 82.1%
              left: 80.05%
              width: 10%
            tap_action:
              action: more-info
          #  hold_action: !include popup/studio_monitorer.yaml
            custom_fields:
              icon_temperature: *icon_temperature
            styles: *icon_temperature_styles
            template: sensors

          - type: custom:button-card
            entity: sensor.humidity_158d0001dc17c3
            name: 次卧湿度
            style:
              top: 82.1%
              left: 91.05%
              width: 10%
            tap_action:
              action: more-info
          #  hold_action: !include popup/studio_monitorer.yaml
            custom_fields:
              icon_humidity: *icon_humidity
            styles: *icon_humidity_styles
            template: sensors

  - panel: true
    path: default_view3
    title: 厨卫区
    cards:

  - panel: true
    path: default_view4
    title: 系统信息
    cards:








